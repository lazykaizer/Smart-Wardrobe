<!DOCTYPE html> <!-- HTML5 document type declaration -->
<html lang="en"> <!-- Root HTML element with English language attribute -->
<head> <!-- Document head section containing metadata and external resources -->
    <meta charset="UTF-8"> <!-- Character encoding declaration for UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive viewport meta tag for mobile compatibility -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"> <!-- Prevent browser caching for development -->
    <meta http-equiv="Pragma" content="no-cache"> <!-- Additional cache prevention for older browsers -->
    <meta http-equiv="Expires" content="0"> <!-- Set expiration date to past to prevent caching -->
    <title>Welcome - Smart Wardrobe</title> <!-- Page title displayed in browser tab -->
    <link rel="stylesheet" href="styles.css"> <!-- Link to main stylesheet file -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- Font Awesome icon library CDN -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"> <!-- Google Fonts Poppins font family -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Chart.js library for data visualization -->
    <script src="users.js"></script>
    <script src="script.js"></script> <!-- User management JavaScript file -->
    <script src="tutorial.js"></script> <!-- Tutorial functionality JavaScript file -->
    <script> <!-- Authentication security script -->
        // STRICT AUTHENTICATION CHECK - NO BYPASSING ALLOWED
        document.addEventListener('DOMContentLoaded', () => { // Wait for DOM to be fully loaded before checking authentication
            // Wait for userDB to be fully initialized
            const checkAuth = () => { // Function to check if user is properly authenticated
                if (typeof userDB !== 'undefined' && userDB.isLoggedIn) { // Check if userDB exists and has isLoggedIn method
                    if (!userDB.isLoggedIn()) { // If user is not logged in
                        // Clear any invalid data and redirect to login
                        localStorage.removeItem('isLoggedIn'); // Remove login flag from localStorage
                        localStorage.removeItem('currentUser'); // Remove user data from localStorage
                        sessionStorage.clear(); // Clear all session storage
                        console.log('❌ Unauthorized access detected, redirecting to login'); // Log unauthorized access attempt
                        window.location.href = 'login.html'; // Redirect to login page
                    } else { // If user is logged in
                        console.log('✅ User authenticated, dashboard access granted'); // Log successful authentication
                    }
                } else { // If userDB is not ready yet
                    // userDB not ready yet, try again in 100ms
                    setTimeout(checkAuth, 100); // Retry authentication check after 100ms
                }
            };
            
            checkAuth(); // Call authentication check function
        });
    </script> <!-- End of authentication script -->
</head>
<body>

    <aside class="app-sidebar">
        <div class="app-header">
            <img src="assets/logo.png" alt="Logo"/>
            <h1 class="app-title">Smart Wardrobe</h1>
        </div>
        <nav class="app-nav" data-active="0">
            <div class="nav-glider-container">
                <div class="nav-glider"></div>
            </div>
            <a href="index.html" class="nav-link active">
                <i class="fas fa-home"></i><span class="nav-link-text">Dashboard</span>
            </a>
            <a href="wardrobe.html" class="nav-link">
                <i class="fas fa-tshirt"></i><span class="nav-link-text">My Wardrobe</span>
            </a>
            <a href="ai-stylist.html" class="nav-link">
                <i class="fas fa-magic"></i><span class="nav-link-text">AI Outfits</span>
            </a>
            <a href="style-guide.html" class="nav-link">
                <i class="fas fa-chart-bar"></i><span class="nav-link-text">Analytics</span>
            </a>
            <a href="ai-cloth-changer.html" class="nav-link">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21 16-4 4-4-4"></path><path d="M17 20V4"></path><path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path></svg><span class="nav-link-text">AI Cloth Changer</span>
            </a>
        </nav>
        <div class="app-bottom">
            <button id="sidebar-toggle" class="btn-sidebar-toggle" onclick="toggleSidebar()">
                <div class="button-outer">
                    <div class="button-inner">
                <span class="label">Collapse</span>
                <i class="fas fa-chevron-left"></i>
                    </div>
                </div>
            </button>
        </div>
    </aside>

    <div class="app-content">
        <header class="app-topbar">
            <button class="settings-btn" id="settings-btn-main" onclick="window.location.href='settings.html'">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </button>
            <button class="logout-btn" id="logout-btn-main" onclick="if(confirm('Are you sure you want to logout?')){userDB.logoutUser();sessionStorage.clear();localStorage.removeItem('isLoggedIn');window.location.href='landing.html';}">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </header>

        <main class="home-content">
            <style>
                .home-content {
                    padding: 32px;
                    background: #0f0f23;
                    min-height: calc(100vh - 70px);
                }

                .settings-btn {
                    background: linear-gradient(135deg, #a855f7, #7c3aed);
                    color: white;
                    border: none;
                    padding: 12px 20px;
                    border-radius: 8px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    margin-right: 12px;
                }

                .settings-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 20px rgba(168, 85, 247, 0.3);
                }
                
                .logout-btn {
                    background: linear-gradient(135deg, #ef4444, #dc2626);
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 8px;
                    cursor: pointer;
                    font-size: 0.9em;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    transition: all 0.3s ease;
                    margin-left: 12px;
                }
                
                .logout-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
                }

                .app-topbar {
                    display: flex;
                    justify-content: flex-end;
                    align-items: center;
                    padding: 20px 32px;
                    background: rgba(255, 255, 255, 0.05);
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .welcome-section-main {
                    margin-bottom: 32px;
                }
                
                .welcome-title {
                    background: linear-gradient(135deg, #a855f7, #06b6d4);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    font-size: 2.5em;
                    font-weight: 700;
                    margin: 0 0 12px 0;
                    letter-spacing: -0.5px;
                }
                
                .welcome-subtitle {
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 1.05em;
                    margin: 0;
                    line-height: 1.6;
                    max-width: 800px;
                }
                
                .dashboard-grid {
                    display: grid;
                    gap: 24px;
                    max-width: 1600px;
                    margin: 0 auto;
                }
                
                /* Quick Stats Cards */
                .quick-stats {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                    gap: 20px;
                    margin-bottom: 24px;
                }
                
                .stat-card-home {
                    background: rgba(255, 255, 255, 0.04);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 16px;
                    padding: 20px;
                    text-align: center;
                    transition: all 0.3s;
                    animation: fadeInUp 0.6s ease;
                }
                
                .stat-card-home:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
                }
                
                .stat-icon-home {
                    font-size: 2.5em;
                    margin-bottom: 8px;
                }
                
                .stat-value-home {
                    font-size: 2em;
                    font-weight: 700;
                    color: #fff;
                    margin-bottom: 4px;
                }
                
                .stat-label-home {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                }
                
                
                /* Events Panel */
                .events-panel {
                    background: rgba(255, 255, 255, 0.04);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 20px;
                    padding: 24px;
                    animation: fadeIn 1s ease;
                }
                
                .events-panel h2 {
                    color: #fff;
                    margin-bottom: 20px;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                }
                
                .events-list {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                    max-height: 300px;
                    overflow-y: auto;
                }
                
                .event-item {
                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 12px;
                    padding: 16px;
                    margin-bottom: 12px;
                    transition: all 0.3s ease;
                    position: relative;
                    backdrop-filter: blur(20px);
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
                }
                
                .event-item:hover {
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.25) 0%, rgba(168, 85, 247, 0.2) 100%);
                    transform: translateY(-2px) scale(1.01);
                    box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
                    border-color: rgba(124, 58, 237, 0.4);
                }
                
                .event-header {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    margin-bottom: 8px;
                }
                
                .event-icon {
                    font-size: 1.4em;
                    margin-right: 12px;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                }
                
                .event-title {
                    font-weight: 700;
                    color: #fff;
                    font-size: 1.1em;
                    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
                }
                
                .event-actions {
                    display: flex;
                    gap: 6px;
                }
                
                .event-action-btn {
                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.15) 100%);
                    border: 1px solid rgba(255, 255, 255, 0.3);
                    border-radius: 8px;
                    padding: 6px 12px;
                    color: rgba(255, 255, 255, 0.9);
                    cursor: pointer;
                    transition: all 0.3s ease;
                    font-size: 0.8em;
                    font-weight: 600;
                    backdrop-filter: blur(10px);
                }
                
                .event-action-btn:hover {
                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.25) 100%);
                    color: #fff;
                    transform: translateY(-1px);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                }
                
                .event-action-btn.edit:hover {
                    background: linear-gradient(135deg, rgba(59, 130, 246, 0.4) 0%, rgba(59, 130, 246, 0.3) 100%);
                    border-color: rgba(59, 130, 246, 0.5);
                }
                
                .event-action-btn.delete:hover {
                    background: linear-gradient(135deg, rgba(239, 68, 68, 0.4) 0%, rgba(239, 68, 68, 0.3) 100%);
                    border-color: rgba(239, 68, 68, 0.5);
                }
                
                .event-action-btn.complete:hover {
                    background: linear-gradient(135deg, rgba(16, 185, 129, 0.4) 0%, rgba(16, 185, 129, 0.3) 100%);
                    border-color: rgba(16, 185, 129, 0.5);
                }
                
                /* Completed Event Styles */
                .event-item.completed {
                    opacity: 0.7;
                    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%);
                    border-color: rgba(16, 185, 129, 0.3);
                }
                
                .event-item.completed .event-title {
                    text-decoration: line-through;
                    color: rgba(255, 255, 255, 0.6);
                }
                
                .event-item.completed .event-icon {
                    opacity: 0.6;
                }
                
                .event-item.completed .event-time {
                    color: rgba(255, 255, 255, 0.5);
                }
                
                .completion-checkbox {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    margin-bottom: 8px;
                }
                
                .completion-checkbox input[type="checkbox"] {
                    width: 18px;
                    height: 18px;
                    accent-color: #10b981;
                    cursor: pointer;
                }
                
                .completion-checkbox label {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.85em;
                    cursor: pointer;
                    user-select: none;
                }
                
                .event-details {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    margin-bottom: 6px;
                }
                
                .event-time {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    margin-bottom: 6px;
                    font-weight: 500;
                }
                
                .event-outfit {
                    color: rgba(124, 58, 237, 0.95);
                    font-size: 0.95em;
                    font-style: italic;
                    background: rgba(124, 58, 237, 0.15);
                    padding: 4px 10px;
                    border-radius: 6px;
                    margin-top: 6px;
                    display: inline-block;
                    font-weight: 600;
                    border: 1px solid rgba(124, 58, 237, 0.3);
                }
                
                .event-outfit-tag {
                    background: rgba(168, 85, 247, 0.4);
                    color: #fff;
                    padding: 4px 12px;
                    border-radius: 8px;
                    font-size: 0.85em;
                    display: inline-block;
                }
                
                /* AI Insights */
                .insights-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                    gap: 20px;
                    margin-bottom: 24px;
                }
                
                .insight-card-home {
                    background: rgba(255, 255, 255, 0.04);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 16px;
                    padding: 20px;
                    display: flex;
                    gap: 16px;
                    transition: all 0.3s;
                    animation: fadeInLeft 0.8s ease;
                }
                
                .insight-card-home:hover {
                    background: rgba(255, 255, 255, 0.06);
                    box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
                }
                
                .insight-icon-home {
                    font-size: 2em;
                    flex-shrink: 0;
                }
                
                .insight-text {
                    flex: 1;
                }
                
                .insight-text h4 {
                    color: #fff;
                    margin-bottom: 6px;
                    font-size: 1em;
                }
                
                .insight-text p {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    line-height: 1.5;
                }
                
                /* Mini Charts */
                .charts-section {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                    gap: 24px;
                    margin-bottom: 24px;
                }
                
                .chart-card-home {
                    background: rgba(255, 255, 255, 0.04);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 16px;
                    padding: 24px;
                }
                
                .chart-card-home h3 {
                    color: #fff;
                    margin-bottom: 16px;
                    font-size: 1.1em;
                }
                
                .chart-wrapper-home {
                    height: 200px;
                    position: relative;
                }
                
                /* AI Assistant Bubble */
                .ai-assistant-bubble {
                    position: fixed;
                    bottom: 32px;
                    right: 32px;
                    z-index: 1001;
                }
                
                .ai-bubble-btn {
                    width: 64px;
                    height: 64px;
                    background: linear-gradient(135deg, #7c3aed, #06b6d4);
                    border: none;
                    border-radius: 50%;
                    color: white;
                    font-size: 1.8em;
                    cursor: pointer;
                    box-shadow: 0 8px 24px rgba(124, 58, 237, 0.4);
                    transition: all 0.3s;
                    animation: pulse 2s infinite;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', sans-serif;
                    line-height: 1;
                }
                
                .ai-bubble-btn:hover {
                    transform: scale(1.1);
                }
                
                .ai-chat-panel {
                    position: absolute;
                    bottom: 80px;
                    right: 0;
                    width: 350px;
                    background: rgba(15, 15, 35, 0.98);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 20px;
                    padding: 20px;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
                    display: none;
                    animation: slideUp 0.3s ease;
                }
                
                .ai-chat-panel.active {
                    display: block;
                }
                
                .ai-chat-header {
                    color: #fff;
                    margin-bottom: 16px;
                    font-size: 1.2em;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding-bottom: 12px;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .ai-chat-messages {
                    max-height: 200px;
                    overflow-y: auto;
                    margin-bottom: 16px;
                    padding: 12px 0;
                }
                
                .ai-message {
                    display: flex;
                    gap: 10px;
                    margin-bottom: 12px;
                    animation: fadeInUp 0.3s ease;
                }
                
                .ai-message-avatar {
                    font-size: 20px;
                    flex-shrink: 0;
                    width: 32px;
                    height: 32px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: rgba(6, 182, 212, 0.2);
                    border-radius: 50%;
                    margin-right: 12px;
                }
                
                .ai-message-content {
                    background: rgba(255, 255, 255, 0.08);
                    padding: 10px 14px;
                    border-radius: 12px;
                    color: rgba(255, 255, 255, 0.9);
                    font-size: 14px;
                    line-height: 1.5;
                    flex: 1;
                }
                
                .ai-suggestions {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
                
                .ai-suggestion-btn {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 12px 16px;
                    border-radius: 10px;
                    cursor: pointer;
                    text-align: left;
                    transition: all 0.3s;
                }
                
                .ai-input-container {
                    display: flex;
                    gap: 8px;
                    margin-top: 12px;
                    padding-top: 12px;
                    border-top: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .ai-chat-input {
                    flex: 1;
                    background: rgba(255, 255, 255, 0.08);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 10px 14px;
                    border-radius: 10px;
                    font-size: 14px;
                    outline: none;
                    transition: all 0.3s;
                }
                
                .ai-chat-input:focus {
                    border-color: rgba(168, 85, 247, 0.6);
                    background: rgba(255, 255, 255, 0.12);
                }
                
                .ai-send-btn {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    border: none;
                    color: #fff;
                    padding: 10px 16px;
                    border-radius: 10px;
                    cursor: pointer;
                    transition: all 0.3s;
                    font-size: 16px;
                }
                
                .ai-send-btn:hover {
                    transform: scale(1.05);
                    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
                }
                
                .ai-suggestion-btn:hover {
                    background: rgba(255, 255, 255, 0.2);
                    transform: translateX(5px);
                }
                
                /* New Two Column Layout */
                .main-panels-new {
                    display: grid;
                    grid-template-columns: 1fr 380px;
                    gap: 24px;
                    margin-bottom: 24px;
                }
                
                .left-column {
                    display: flex;
                    flex-direction: column;
                }
                
                .right-column {
                    display: flex;
                    flex-direction: column;
                    gap: 20px;
                }
                
                
                /* Enhanced Weather Widget */
                .weather-widget-enhanced {
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(6, 182, 212, 0.1));
                    backdrop-filter: blur(20px);
                    border: 1px solid rgba(255, 255, 255, 0.15);
                    border-radius: 20px;
                    padding: 20px;
                    margin-bottom: 20px;
                    transition: all 0.3s ease;
                    position: relative;
                    overflow: hidden;
                }
                
                .weather-widget-enhanced::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 2px;
                    background: linear-gradient(90deg, #7c3aed, #06b6d4, #10b981, #f59e0b);
                    animation: shimmer 3s ease-in-out infinite;
                }
                
                .weather-widget-enhanced:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 12px 30px rgba(124, 58, 237, 0.3);
                    border-color: rgba(124, 58, 237, 0.4);
                }
                
                .weather-widget-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 16px;
                }
                
                .weather-widget-header h3 {
                    color: #fff;
                    font-size: 1.1em;
                    font-weight: 600;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                
                .weather-refresh-btn {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    width: 32px;
                    height: 32px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 0.9em;
                }
                
                .weather-refresh-btn:hover {
                    background: rgba(124, 58, 237, 0.3);
                    transform: rotate(180deg);
                }
                
                .weather-main-display {
                    text-align: center;
                    margin-bottom: 20px;
                    padding: 16px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 16px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .weather-icon-large {
                    font-size: 3.5em;
                    margin-bottom: 8px;
                    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
                    animation: weatherFloat 3s ease-in-out infinite;
                }
                
                @keyframes weatherFloat {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-5px); }
                }
                
                .weather-temp-large {
                    color: #fff;
                    font-size: 2.2em;
                    font-weight: 700;
                    margin-bottom: 4px;
                    background: linear-gradient(135deg, #7c3aed, #06b6d4);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                }
                
                .weather-condition-large {
                    color: rgba(255, 255, 255, 0.9);
                    font-size: 1.1em;
                    font-weight: 500;
                    margin-bottom: 8px;
                }
                
                .weather-location {
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 0.9em;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 6px;
                }
                
                .weather-details-grid {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 12px;
                    margin-bottom: 20px;
                }
                
                .weather-detail-item {
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 12px;
                    padding: 12px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 4px;
                    transition: all 0.3s ease;
                }
                
                .weather-detail-item:hover {
                    background: rgba(255, 255, 255, 0.08);
                    transform: translateY(-2px);
                }
                
                .weather-detail-item i {
                    color: #7c3aed;
                    font-size: 1.2em;
                    margin-bottom: 4px;
                }
                
                .detail-label {
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 0.75em;
                    text-align: center;
                }
                
                .detail-value {
                    color: #fff;
                    font-weight: 600;
                    font-size: 0.9em;
                    text-align: center;
                }
                
                .weather-forecast {
                    margin-bottom: 20px;
                }
                
                .forecast-header {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    font-weight: 600;
                    margin-bottom: 12px;
                    text-align: center;
                }
                
                .forecast-days {
                    display: flex;
                    justify-content: space-between;
                    gap: 8px;
                }
                
                .forecast-day {
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 10px;
                    padding: 10px 8px;
                    text-align: center;
                    flex: 1;
                    transition: all 0.3s ease;
                }
                
                .forecast-day:hover {
                    background: rgba(255, 255, 255, 0.08);
                    transform: translateY(-2px);
                }
                
                .forecast-day-name {
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 0.7em;
                    margin-bottom: 6px;
                    font-weight: 500;
                }
                
                .forecast-day-icon {
                    font-size: 1.5em;
                    margin-bottom: 4px;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                }
                
                .forecast-day-temp {
                    color: #fff;
                    font-size: 0.8em;
                    font-weight: 600;
                }
                
                .weather-outfit-suggestion {
                    background: rgba(124, 58, 237, 0.15);
                    border: 1px solid rgba(124, 58, 237, 0.3);
                    border-radius: 12px;
                    padding: 16px;
                    margin-bottom: 20px;
                }
                
                .outfit-suggestion-header {
                    color: #fff;
                    font-size: 0.9em;
                    font-weight: 600;
                    margin-bottom: 8px;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                
                .outfit-suggestion-content {
                    color: rgba(255, 255, 255, 0.9);
                    font-size: 0.85em;
                    line-height: 1.4;
                }
                
                .weather-actions {
                    display: flex;
                    gap: 8px;
                }
                
                .weather-action-btn {
                    flex: 1;
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 10px 12px;
                    border-radius: 10px;
                    font-size: 0.8em;
                    font-weight: 500;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 6px;
                }
                
                .weather-action-btn:hover {
                    background: rgba(124, 58, 237, 0.3);
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
                }

                /* Color Combination Card */
                .color-combination-card {
                    background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
                    backdrop-filter: blur(20px);
                    border: 1px solid rgba(255, 255, 255, 0.15);
                    border-radius: 20px;
                    padding: 20px;
                    margin-bottom: 20px;
                    transition: all 0.3s ease;
                    position: relative;
                    overflow: hidden;
                    animation: fadeInUp 0.8s ease;
                }
                
                .color-combination-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 2px;
                    background: linear-gradient(90deg, #a855f7, #ec4899, #f59e0b, #10b981);
                    animation: shimmer 3s ease-in-out infinite;
                }
                
                .color-combination-card:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 12px 30px rgba(168, 85, 247, 0.3);
                    border-color: rgba(168, 85, 247, 0.4);
                }

                /* Compact Color Combination Widget */
                .color-combination-widget-compact {
                    background: linear-gradient(135deg, rgba(168, 85, 247, 0.08), rgba(236, 72, 153, 0.08));
                    backdrop-filter: blur(15px);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 15px;
                    padding: 15px;
                    margin-bottom: 15px;
                    transition: all 0.3s ease;
                    position: relative;
                    overflow: hidden;
                }
                
                .color-combination-widget-compact::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 1px;
                    background: linear-gradient(90deg, #a855f7, #ec4899);
                }
                
                .color-combination-widget-compact:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 20px rgba(168, 85, 247, 0.2);
                    border-color: rgba(168, 85, 247, 0.3);
                }
                
                .color-combination-header-compact {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 12px;
                }
                
                .color-combination-header-compact h3 {
                    color: #fff;
                    font-size: 0.95em;
                    font-weight: 600;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }
                
                .color-refresh-btn-compact {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 6px 8px;
                    border-radius: 8px;
                    font-size: 0.8em;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .color-refresh-btn-compact:hover {
                    background: rgba(168, 85, 247, 0.3);
                    transform: rotate(180deg);
                }
                
                .color-combination-main-compact {
                    display: flex;
                    gap: 8px;
                    margin-bottom: 10px;
                    padding: 8px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 10px;
                    justify-content: center;
                }
                
                .combination-name-compact {
                    color: #fff;
                    font-size: 0.85em;
                    font-weight: 500;
                    text-align: center;
                    margin-bottom: 8px;
                    opacity: 0.9;
                }
                
                .alternative-combinations-compact {
                    display: flex;
                    gap: 6px;
                    margin-bottom: 10px;
                    justify-content: center;
                }
                
                .alternative-combination-compact {
                    display: flex;
                    gap: 4px;
                    cursor: pointer;
                    padding: 4px 6px;
                    border-radius: 6px;
                    transition: all 0.3s ease;
                    background: rgba(255, 255, 255, 0.05);
                }
                
                .alternative-combination-compact:hover {
                    background: rgba(168, 85, 247, 0.2);
                    transform: scale(1.05);
                }
                
                .color-swatch-compact {
                    width: 16px;
                    height: 16px;
                    border-radius: 50%;
                    border: 2px solid rgba(255, 255, 255, 0.3);
                    transition: all 0.3s ease;
                    cursor: pointer;
                }
                
                .color-swatch-compact:hover {
                    transform: scale(1.2);
                    border-color: rgba(255, 255, 255, 0.6);
                }
                
                .color-actions-compact {
                    display: flex;
                    gap: 8px;
                    justify-content: center;
                }
                
                .color-action-btn-compact {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 8px 12px;
                    border-radius: 8px;
                    font-size: 0.8em;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    flex: 1;
                }
                
                .color-action-btn-compact:hover {
                    background: rgba(168, 85, 247, 0.3);
                    transform: translateY(-1px);
                }
                
                .color-combination-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 16px;
                }
                
                .color-combination-header h3 {
                    color: #fff;
                    font-size: 1.1em;
                    font-weight: 600;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                
                .color-refresh-btn {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    width: 32px;
                    height: 32px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 0.9em;
                }
                
                .color-refresh-btn:hover {
                    background: rgba(168, 85, 247, 0.3);
                    transform: rotate(180deg);
                }
                
                .color-combination-content {
                    display: flex;
                    flex-direction: column;
                    gap: 16px;
                }
                
                .color-combination-main {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    gap: 8px;
                    padding: 16px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 16px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    margin-bottom: 8px;
                }
                
                .color-swatch {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    border: 3px solid rgba(255, 255, 255, 0.3);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                    transition: all 0.3s ease;
                    position: relative;
                    cursor: pointer;
                }
                
                .color-swatch:hover {
                    transform: scale(1.1);
                    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
                }
                
                .color-swatch::after {
                    content: attr(data-color);
                    position: absolute;
                    bottom: -20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(0, 0, 0, 0.8);
                    color: #fff;
                    padding: 2px 6px;
                    border-radius: 4px;
                    font-size: 0.7em;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                    pointer-events: none;
                }
                
                .color-swatch:hover::after {
                    opacity: 1;
                }
                
                .color-combination-details {
                    text-align: center;
                }
                
                .combination-name {
                    color: #fff;
                    font-size: 1.2em;
                    font-weight: 600;
                    margin-bottom: 6px;
                }
                
                .combination-description {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    line-height: 1.4;
                    margin-bottom: 12px;
                }
                
                .combination-tags {
                    display: flex;
                    justify-content: center;
                    gap: 6px;
                    flex-wrap: wrap;
                }
                
                .tag {
                    background: rgba(168, 85, 247, 0.2);
                    color: #a855f7;
                    padding: 4px 10px;
                    border-radius: 12px;
                    font-size: 0.75em;
                    font-weight: 500;
                    border: 1px solid rgba(168, 85, 247, 0.3);
                }
                
                .color-alternatives {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 12px;
                    padding: 12px;
                }
                
                .alternatives-header {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.85em;
                    font-weight: 600;
                    margin-bottom: 10px;
                    text-align: center;
                }
                
                .alternative-combinations {
                    display: flex;
                    justify-content: center;
                    gap: 6px;
                    flex-wrap: wrap;
                }
                
                .alternative-combination {
                    display: flex;
                    gap: 3px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    padding: 4px;
                    border-radius: 8px;
                }
                
                .alternative-combination:hover {
                    background: rgba(255, 255, 255, 0.1);
                    transform: scale(1.05);
                }
                
                .alt-color-swatch {
                    width: 16px;
                    height: 16px;
                    border-radius: 50%;
                    border: 1px solid rgba(255, 255, 255, 0.3);
                    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
                }
                
                .color-actions {
                    display: flex;
                    gap: 8px;
                }
                
                .color-action-btn {
                    flex: 1;
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 10px 12px;
                    border-radius: 10px;
                    font-size: 0.8em;
                    font-weight: 500;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 6px;
                }
                
                .color-action-btn:hover {
                    background: rgba(168, 85, 247, 0.3);
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
                }
                
                .color-action-btn.save:hover {
                    background: rgba(236, 72, 153, 0.3);
                    box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
                }

                /* Weather Alerts */
                .weather-alerts-container {
                    margin-bottom: 16px;
                }

                .weather-alert {
                    border-radius: 12px;
                    margin-bottom: 8px;
                    overflow: hidden;
                    animation: slideInDown 0.5s ease;
                    border-left: 4px solid;
                }

                .weather-alert-high {
                    background: rgba(239, 68, 68, 0.15);
                    border-left-color: #ef4444;
                    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
                }

                .weather-alert-medium {
                    background: rgba(245, 158, 11, 0.15);
                    border-left-color: #f59e0b;
                    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2);
                }

                .weather-alert-low {
                    background: rgba(59, 130, 246, 0.15);
                    border-left-color: #3b82f6;
                    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
                }

                .alert-content {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 12px 16px;
                }

                .alert-message {
                    color: #fff;
                    font-size: 0.85em;
                    font-weight: 500;
                    line-height: 1.4;
                    flex: 1;
                }

                .alert-close {
                    background: none;
                    border: none;
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 1.2em;
                    cursor: pointer;
                    padding: 4px;
                    border-radius: 4px;
                    transition: all 0.3s ease;
                    margin-left: 12px;
                }

                .alert-close:hover {
                    color: #fff;
                    background: rgba(255, 255, 255, 0.1);
                }

                @keyframes slideInDown {
                    from {
                        opacity: 0;
                        transform: translateY(-20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                /* Simple Weather Widget */
                .weather-widget-simple {
                    background: rgba(255, 255, 255, 0.05);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 16px;
                    padding: 20px;
                    margin-bottom: 20px;
                    animation: fadeInSlide 0.6s ease;
                }
                
                .weather-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 16px;
                }
                
                .weather-header h3 {
                    color: #fff;
                    font-size: 1.2em;
                    font-weight: 600;
                    margin: 0;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                
                .weather-refresh-btn {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    width: 32px;
                    height: 32px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .weather-refresh-btn:hover {
                    background: rgba(255, 255, 255, 0.2);
                    transform: scale(1.05);
                }
                
                .weather-main {
                    display: flex;
                    align-items: center;
                    gap: 16px;
                    margin-bottom: 16px;
                }
                
                .weather-icon {
                    font-size: 2.5em;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                }
                
                .weather-info {
                    flex: 1;
                }
                
                .weather-temp {
                    font-size: 1.8em;
                    font-weight: 700;
                    color: #fff;
                    margin-bottom: 4px;
                }
                
                .weather-condition {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    margin-bottom: 4px;
                }
                
                .weather-location {
                    color: rgba(255, 255, 255, 0.6);
                    font-size: 0.8em;
                }
                
                .weather-outfit-suggestion {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    padding: 12px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .outfit-suggestion-text {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    color: rgba(255, 255, 255, 0.9);
                    font-size: 0.9em;
                }
                
                .outfit-suggestion-text i {
                    color: #fbbf24;
                }
                
                /* Calendar Widget */
                .calendar-widget {
                    background: rgba(255, 255, 255, 0.04);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 12px;
                    padding: 12px;
                    animation: fadeIn 1s ease;
                }
                
                .calendar-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 8px;
                }
                
                .calendar-title {
                    color: #fff;
                    font-size: 1em;
                    font-weight: 600;
                    margin: 0;
                }
                
                .calendar-nav-btn {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    width: 26px;
                    height: 26px;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: all 0.3s;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 0.8em;
                }
                
                .calendar-nav-btn:hover {
                    background: rgba(168, 85, 247, 0.3);
                    transform: scale(1.05);
                }
                
                .calendar-weekdays {
                    display: grid;
                    grid-template-columns: repeat(7, 1fr);
                    gap: 4px;
                    margin-bottom: 6px;
                    text-align: center;
                    font-weight: 600;
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 0.75em;
                }
                
                .calendar-days {
                    display: grid;
                    grid-template-columns: repeat(7, 1fr);
                    gap: 4px;
                    margin-bottom: 15px;
                }
                
                .calendar-day {
                    aspect-ratio: 1;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 6px;
                    color: rgba(255, 255, 255, 0.8);
                    cursor: pointer;
                    transition: all 0.3s;
                    font-size: 0.75em;
                    position: relative;
                }
                
                .calendar-day:hover {
                    background: rgba(168, 85, 247, 0.3);
                    transform: scale(1.05);
                    border-color: rgba(168, 85, 247, 0.5);
                }
                
                .calendar-day.today {
                    background: linear-gradient(135deg, #a855f7, #06b6d4);
                    color: #fff;
                    font-weight: 700;
                }
                
                .calendar-day.has-event::after {
                    content: '';
                    position: absolute;
                    bottom: 4px;
                    width: 4px;
                    height: 4px;
                    background: #06b6d4;
                    border-radius: 50%;
                }
                
                .calendar-day.has-completed-event::after {
                    background: #10b981;
                    width: 6px;
                    height: 6px;
                }
                
                .calendar-day.has-pending-event::after {
                    background: #f59e0b;
                    width: 4px;
                    height: 4px;
                }
                
                .calendar-day.other-month {
                    opacity: 0.3;
                }
                
                .add-event-btn {
                    width: 100%;
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    border: none;
                    color: #fff;
                    padding: 14px;
                    border-radius: 12px;
                    font-size: 1em;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 8px;
                }
                
                .add-event-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
                }
                
                /* Outfit of the Day Card */
                .outfit-of-day-card {
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.15), rgba(6, 182, 212, 0.15));
                    backdrop-filter: blur(25px);
                    border: 2px solid rgba(124, 58, 237, 0.4);
                    border-radius: 28px;
                    padding: 32px;
                    margin-bottom: 28px;
                    animation: fadeInSlide 0.8s ease;
                    box-shadow: 0 16px 50px rgba(124, 58, 237, 0.4),
                                inset 0 1px 1px rgba(255, 255, 255, 0.15);
                    position: relative;
                    overflow: hidden;
                }
                
                .outfit-of-day-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 2px;
                    background: linear-gradient(90deg, #7c3aed, #06b6d4, #10b981, #f59e0b);
                    animation: shimmer 3s ease-in-out infinite;
                }
                
                @keyframes shimmer {
                    0%, 100% { opacity: 0.5; }
                    50% { opacity: 1; }
                }
                
                .outfit-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                
                .outfit-header h2 {
                    color: #fff;
                    font-size: 1.5em;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    margin: 0;
                }
                
                .outfit-badge {
                    background: linear-gradient(135deg, #7c3aed, #06b6d4);
                    color: #fff;
                    padding: 6px 16px;
                    border-radius: 20px;
                    font-size: 0.85em;
                    font-weight: 600;
                    animation: pulse 2s infinite;
                }
                
                .outfit-preview {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 16px;
                    padding: 20px;
                    margin-bottom: 20px;
                    min-height: 200px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    position: relative;
                    overflow: hidden;
                }
                
                .outfit-items-grid {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 16px;
                    width: 100%;
                    max-width: 400px;
                }
                
                .outfit-item {
                    background: rgba(255, 255, 255, 0.08);
                    border: 1px solid rgba(255, 255, 255, 0.15);
                    border-radius: 12px;
                    padding: 16px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 12px;
                    transition: all 0.3s ease;
                    cursor: pointer;
                    text-align: center;
                    position: relative;
                }
                
                .outfit-item:hover {
                    transform: translateY(-5px) scale(1.02);
                    box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
                    border-color: rgba(124, 58, 237, 0.6);
                    background: rgba(255, 255, 255, 0.12);
                }
                
                .outfit-item-image {
                    width: 80px;
                    height: 80px;
                    object-fit: cover;
                    border-radius: 12px;
                    background: rgba(255, 255, 255, 0.05);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 2em;
                    flex-shrink: 0;
                    border: 2px solid rgba(255, 255, 255, 0.1);
                    position: relative;
                    overflow: hidden;
                }
                
                .outfit-item-image img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    border-radius: 10px;
                }
                
                .outfit-item-info {
                    width: 100%;
                }
                
                .outfit-item-name {
                    color: #fff;
                    font-size: 0.9em;
                    font-weight: 600;
                    margin-bottom: 4px;
                    line-height: 1.2;
                }
                
                .outfit-item-category {
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 0.75em;
                    text-transform: capitalize;
                    font-weight: 500;
                }
                
                .outfit-actions {
                    display: flex;
                    gap: 8px;
                    justify-content: space-between;
                    margin-top: 12px;
                    flex-direction: row;
                    align-items: center;
                }
                
                .outfit-btn {
                    padding: 10px 14px;
                    border: none;
                    border-radius: 8px;
                    font-size: 0.8em;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 6px;
                    flex: 1;
                    min-width: 0;
                    white-space: nowrap;
                }
                
                .wear-btn {
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: #fff;
                }
                
                .wear-btn:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
                }
                
                .outfit-actions {
                    display: flex;
                    gap: 12px;
                    justify-content: center;
                    margin-top: 20px;
                    flex-direction: row;
                    align-items: center;
                    flex-wrap: wrap;
                }
                
                .outfit-btn {
                    padding: 12px 20px;
                    border: none;
                    border-radius: 12px;
                    font-size: 0.85em;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 8px;
                    flex: 1;
                    min-width: 100px;
                    max-width: 120px;
                    white-space: nowrap;
                    position: relative;
                    overflow: hidden;
                }
                
                .outfit-btn::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                    transition: left 0.5s;
                }
                
                .outfit-btn:hover::before {
                    left: 100%;
                }
                
                .wear-btn {
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: #fff;
                    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
                }
                
                .wear-btn:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
                }
                
                .shuffle-btn {
                    background: linear-gradient(135deg, #f59e0b, #d97706);
                    color: #fff;
                    box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
                }
                
                .shuffle-btn:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 8px 25px rgba(245, 158, 11, 0.5);
                }
                
                .edit-btn {
                    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                    color: #fff;
                    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
                }
                
                .edit-btn:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 8px 25px rgba(139, 92, 246, 0.5);
                }
                
                /* Enhanced Outfit Features */
                .outfit-stats {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 20px;
                    padding: 16px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 12px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .outfit-stat-item {
                    text-align: center;
                    flex: 1;
                }
                
                .outfit-stat-value {
                    font-size: 1.2em;
                    font-weight: 700;
                    color: #fff;
                    margin-bottom: 4px;
                }
                
                .outfit-stat-label {
                    font-size: 0.8em;
                    color: rgba(255, 255, 255, 0.7);
                }
                
                .outfit-rating {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    margin-bottom: 16px;
                }
                
                .rating-stars {
                    display: flex;
                    gap: 2px;
                }
                
                .rating-star {
                    font-size: 1.2em;
                    color: rgba(255, 255, 255, 0.3);
                    cursor: pointer;
                    transition: all 0.3s ease;
                }
                
                .rating-star.active {
                    color: #fbbf24;
                    text-shadow: 0 0 8px rgba(251, 191, 36, 0.5);
                }
                
                .rating-star:hover {
                    color: #fbbf24;
                    transform: scale(1.1);
                }
                
                .outfit-weather-match {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    padding: 8px 12px;
                    background: rgba(16, 185, 129, 0.15);
                    border: 1px solid rgba(16, 185, 129, 0.3);
                    border-radius: 8px;
                    margin-bottom: 16px;
                }
                
                .weather-match-icon {
                    font-size: 1.1em;
                }
                
                .weather-match-text {
                    font-size: 0.85em;
                    color: rgba(255, 255, 255, 0.9);
                }
                
                .outfit-suggestions {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 12px;
                    padding: 16px;
                    margin-bottom: 16px;
                }
                
                .suggestions-header {
                    color: #fff;
                    font-size: 0.9em;
                    font-weight: 600;
                    margin-bottom: 12px;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                
                .suggestion-item {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    padding: 6px 0;
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.85em;
                }
                
                .suggestion-icon {
                    font-size: 0.9em;
                    color: #7c3aed;
                }
                
                .outfit-tags {
                    display: flex;
                    gap: 6px;
                    flex-wrap: wrap;
                    margin-bottom: 16px;
                }
                
                .outfit-tag {
                    background: rgba(168, 85, 247, 0.2);
                    color: #a855f7;
                    padding: 4px 10px;
                    border-radius: 12px;
                    font-size: 0.75em;
                    font-weight: 500;
                    border: 1px solid rgba(168, 85, 247, 0.3);
                }
                
                .outfit-tag.weather {
                    background: rgba(6, 182, 212, 0.2);
                    color: #06b6d4;
                    border-color: rgba(6, 182, 212, 0.3);
                }
                
                .outfit-tag.occasion {
                    background: rgba(16, 185, 129, 0.2);
                    color: #10b981;
                    border-color: rgba(16, 185, 129, 0.3);
                }
                
                .outfit-tag.style {
                    background: rgba(245, 158, 11, 0.2);
                    color: #f59e0b;
                    border-color: rgba(245, 158, 11, 0.3);
                }
                
                /* Enhanced Events Panel */
                .events-panel-compact {
                    background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
                    backdrop-filter: blur(20px);
                    border: 1px solid rgba(255, 255, 255, 0.15);
                    border-radius: 20px;
                    padding: 24px;
                    animation: fadeInUp 0.8s ease;
                    position: relative;
                    overflow: hidden;
                }
                
                .events-panel-compact::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 2px;
                    background: linear-gradient(90deg, #a855f7, #ec4899, #f59e0b, #10b981);
                    animation: shimmer 3s ease-in-out infinite;
                }
                
                .events-panel-compact h3 {
                    color: #fff;
                    margin-bottom: 20px;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    font-size: 1.2em;
                    font-weight: 600;
                }
                
                .events-list-compact {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                    max-height: 300px;
                    overflow-y: auto;
                }
                
                .event-item-enhanced {
                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.08) 100%);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 16px;
                    padding: 20px;
                    margin-bottom: 12px;
                    transition: all 0.3s ease;
                    position: relative;
                    backdrop-filter: blur(20px);
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
                }
                
                .event-item-enhanced:hover {
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.25) 0%, rgba(168, 85, 247, 0.2) 100%);
                    transform: translateY(-3px) scale(1.02);
                    box-shadow: 0 8px 30px rgba(124, 58, 237, 0.3);
                    border-color: rgba(124, 58, 237, 0.4);
                }
                
                .event-item-enhanced.completed {
                    opacity: 0.7;
                    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%);
                    border-color: rgba(16, 185, 129, 0.3);
                }
                
                .event-header-enhanced {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 12px;
                }
                
                .event-info-enhanced {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    flex: 1;
                }
                
                .event-icon-enhanced {
                    font-size: 1.6em;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                    width: 40px;
                    height: 40px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: rgba(255, 255, 255, 0.1);
                    border-radius: 10px;
                }
                
                .event-title-enhanced {
                    font-weight: 700;
                    color: #fff;
                    font-size: 1.1em;
                    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
                    margin-bottom: 4px;
                }
                
                .event-time-enhanced {
                    color: rgba(255, 255, 255, 0.7);
                    font-size: 0.85em;
                    font-weight: 500;
                }
                
                .event-priority {
                    display: inline-block;
                    padding: 2px 8px;
                    border-radius: 8px;
                    font-size: 0.7em;
                    font-weight: 600;
                    margin-left: 8px;
                }
                
                .priority-high {
                    background: rgba(239, 68, 68, 0.2);
                    color: #ef4444;
                    border: 1px solid rgba(239, 68, 68, 0.3);
                }
                
                .priority-medium {
                    background: rgba(245, 158, 11, 0.2);
                    color: #f59e0b;
                    border: 1px solid rgba(245, 158, 11, 0.3);
                }
                
                .priority-low {
                    background: rgba(16, 185, 129, 0.2);
                    color: #10b981;
                    border: 1px solid rgba(16, 185, 129, 0.3);
                }
                
                .event-category {
                    display: inline-block;
                    padding: 2px 8px;
                    border-radius: 8px;
                    font-size: 0.7em;
                    font-weight: 600;
                    margin-right: 8px;
                }
                
                .category-work {
                    background: rgba(59, 130, 246, 0.2);
                    color: #3b82f6;
                    border: 1px solid rgba(59, 130, 246, 0.3);
                }
                
                .category-social {
                    background: rgba(236, 72, 153, 0.2);
                    color: #ec4899;
                    border: 1px solid rgba(236, 72, 153, 0.3);
                }
                
                .category-personal {
                    background: rgba(168, 85, 247, 0.2);
                    color: #a855f7;
                    border: 1px solid rgba(168, 85, 247, 0.3);
                }
                
                .event-actions-enhanced {
                    display: flex;
                    gap: 6px;
                    flex-direction: column;
                }
                
                .event-action-btn-enhanced {
                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.15) 100%);
                    border: 1px solid rgba(255, 255, 255, 0.3);
                    border-radius: 8px;
                    padding: 6px 10px;
                    color: rgba(255, 255, 255, 0.9);
                    cursor: pointer;
                    transition: all 0.3s ease;
                    font-size: 0.75em;
                    font-weight: 600;
                    backdrop-filter: blur(10px);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 4px;
                }
                
                .event-action-btn-enhanced:hover {
                    background: linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.25) 100%);
                    color: #fff;
                    transform: translateY(-1px);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                }
                
                .event-action-btn-enhanced.complete:hover {
                    background: linear-gradient(135deg, rgba(16, 185, 129, 0.4) 0%, rgba(16, 185, 129, 0.3) 100%);
                    border-color: rgba(16, 185, 129, 0.5);
                }
                
                .event-action-btn-enhanced.edit:hover {
                    background: linear-gradient(135deg, rgba(59, 130, 246, 0.4) 0%, rgba(59, 130, 246, 0.3) 100%);
                    border-color: rgba(59, 130, 246, 0.5);
                }
                
                .event-action-btn-enhanced.delete:hover {
                    background: linear-gradient(135deg, rgba(239, 68, 68, 0.4) 0%, rgba(239, 68, 68, 0.3) 100%);
                    border-color: rgba(239, 68, 68, 0.5);
                }
                
                .event-details-enhanced {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    margin-bottom: 8px;
                }
                
                .event-outfit-enhanced {
                    color: rgba(124, 58, 237, 0.95);
                    font-size: 0.9em;
                    font-style: italic;
                    background: rgba(124, 58, 237, 0.15);
                    padding: 6px 12px;
                    border-radius: 8px;
                    margin-top: 8px;
                    display: inline-block;
                    font-weight: 600;
                    border: 1px solid rgba(124, 58, 237, 0.3);
                }
                
                .event-progress {
                    margin-top: 12px;
                    padding-top: 12px;
                    border-top: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .progress-bar {
                    width: 100%;
                    height: 4px;
                    background: rgba(255, 255, 255, 0.1);
                    border-radius: 2px;
                    overflow: hidden;
                    margin-bottom: 6px;
                }
                
                .progress-fill {
                    height: 100%;
                    background: linear-gradient(90deg, #7c3aed, #06b6d4);
                    border-radius: 2px;
                    transition: width 0.3s ease;
                }
                
                .progress-text {
                    font-size: 0.75em;
                    color: rgba(255, 255, 255, 0.7);
                    text-align: center;
                }
                
                /* Event Modal */
                .event-modal {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    backdrop-filter: blur(10px);
                    z-index: 2000;
                    align-items: center;
                    justify-content: center;
                }
                
                .event-modal.active {
                    display: flex;
                }
                
                .event-modal-content {
                    background: rgba(15, 15, 35, 0.95);
                    backdrop-filter: blur(30px) saturate(180%);
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    border-radius: 24px;
                    padding: 32px;
                    max-width: 500px;
                    width: 90%;
                    max-height: 90vh;
                    overflow-y: auto;
                    animation: slideUp 0.3s ease;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
                }
                
                .event-modal-content::-webkit-scrollbar {
                    width: 8px;
                }
                
                .event-modal-content::-webkit-scrollbar-track {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 10px;
                }
                
                .event-modal-content::-webkit-scrollbar-thumb {
                    background: rgba(168, 85, 247, 0.6);
                    border-radius: 10px;
                }
                
                .event-modal-content::-webkit-scrollbar-thumb:hover {
                    background: rgba(168, 85, 247, 0.8);
                }
                
                .form-group {
                    margin-bottom: 20px;
                }
                
                .form-group label {
                    display: block;
                    color: rgba(255, 255, 255, 0.9);
                    font-weight: 600;
                    margin-bottom: 8px;
                    font-size: 0.95em;
                }
                
                .form-input {
                    background: rgba(255, 255, 255, 0.95);
                    border: 2px solid rgba(255, 255, 255, 0.3);
                    border-radius: 12px;
                    padding: 12px 16px;
                    color: #333;
                    font-size: 1em;
                    width: 100%;
                    transition: all 0.3s ease;
                    backdrop-filter: blur(10px);
                }
                
                .form-input:focus {
                    outline: none;
                    border-color: rgba(124, 58, 237, 0.6);
                    background: rgba(255, 255, 255, 1);
                    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
                }
                
                .form-input::placeholder {
                    color: #666;
                }
                
                .event-modal-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                
                .event-modal-header h3 {
                    color: #fff;
                    font-size: 1.5em;
                    margin: 0;
                }
                
                .close-modal {
                    background: none;
                    border: none;
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 2em;
                    cursor: pointer;
                    transition: all 0.3s;
                    line-height: 1;
                }
                
                .close-modal:hover {
                    color: #fff;
                    transform: rotate(90deg);
                }
                
                .icon-picker {
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 10px;
                    margin-top: 8px;
                }
                
                .icon-option {
                    background: rgba(255, 255, 255, 0.1);
                    border: 2px solid transparent;
                    padding: 6px;
                    border-radius: 8px;
                    font-size: 1.1em;
                    cursor: pointer;
                    transition: all 0.3s;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    aspect-ratio: 1;
                    min-height: 35px;
                }
                
                .icon-option:hover {
                    background: rgba(255, 255, 255, 0.2);
                }
                
                .icon-option.selected {
                    border-color: #a855f7;
                    background: rgba(168, 85, 247, 0.3);
                }
                
                .submit-event-btn {
                    width: 100%;
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    border: none;
                    color: #fff;
                    padding: 14px;
                    border-radius: 12px;
                    font-size: 1em;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s;
                    margin-top: 16px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 8px;
                }
                
                .submit-event-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
                }
                
                /* Animations */
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                @keyframes fadeInLeft {
                    from { opacity: 0; transform: translateX(-20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                
                @keyframes slideUp {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                @keyframes pulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                }
                
                /* Scrollbar Styling */
                .events-list::-webkit-scrollbar {
                    width: 6px;
                }
                
                .events-list::-webkit-scrollbar-track {
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 10px;
                }
                
                .events-list::-webkit-scrollbar-thumb {
                    background: rgba(255, 255, 255, 0.2);
                    border-radius: 10px;
                }
                
                /* Responsive */
                @media (max-width: 1024px) {
                    .main-panels-new {
                        grid-template-columns: 1fr;
                    }
                    .welcome-title {
                        font-size: 2em;
                    }
                    .weather-details-grid {
                        grid-template-columns: 1fr 1fr;
                    }
                    .forecast-days {
                        gap: 6px;
                    }
                    .forecast-day {
                        padding: 8px 6px;
                    }
                }
                
                @media (max-width: 768px) {
                    .home-content {
                        padding: 16px;
                    }
                    .calendar-days {
                        gap: 4px;
                    }
                    .calendar-day {
                        font-size: 0.8em;
                    }
                    .welcome-title {
                        font-size: 1.6em;
                    }
                    .welcome-subtitle {
                        font-size: 0.95em;
                    }
                    
                    /* Enhanced Weather Widget Mobile */
                    .weather-widget-enhanced {
                        padding: 16px;
                        margin-bottom: 16px;
                    }
                    
                    .weather-main-display {
                        padding: 12px;
                        margin-bottom: 16px;
                    }
                    
                    .weather-icon-large {
                        font-size: 2.8em;
                    }
                    
                    .weather-temp-large {
                        font-size: 1.8em;
                    }
                    
                    .weather-condition-large {
                        font-size: 1em;
                    }
                    
                    .weather-details-grid {
                        grid-template-columns: 1fr;
                        gap: 8px;
                        margin-bottom: 16px;
                    }
                    
                    .weather-detail-item {
                        padding: 10px;
                        flex-direction: row;
                        justify-content: space-between;
                        align-items: center;
                    }
                    
                    .weather-detail-item i {
                        margin-bottom: 0;
                        margin-right: 8px;
                    }
                    
                    .detail-label {
                        font-size: 0.8em;
                    }
                    
                    .detail-value {
                        font-size: 0.9em;
                    }
                    
                    .forecast-days {
                        gap: 4px;
                    }
                    
                    .forecast-day {
                        padding: 8px 4px;
                    }
                    
                    .forecast-day-name {
                        font-size: 0.65em;
                    }
                    
                    .forecast-day-icon {
                        font-size: 1.2em;
                    }
                    
                    .forecast-day-temp {
                        font-size: 0.75em;
                    }
                    
                    .weather-outfit-suggestion {
                        padding: 12px;
                        margin-bottom: 16px;
                    }
                    
                    .outfit-suggestion-header {
                        font-size: 0.85em;
                    }
                    
                    .outfit-suggestion-content {
                        font-size: 0.8em;
                    }
                    
                    .weather-actions {
                        flex-direction: column;
                        gap: 6px;
                    }
                    
                    .weather-action-btn {
                        padding: 8px 10px;
                        font-size: 0.75em;
                    }
                    
                    .alert-message {
                        font-size: 0.8em;
                    }
                    
                    .alert-content {
                        padding: 10px 12px;
                    }
                    
                    /* Color Combination Mobile */
                    .color-combination-card {
                        padding: 16px;
                        margin-bottom: 16px;
                    }
                    
                    .color-combination-main {
                        padding: 12px;
                        margin-bottom: 6px;
                    }
                    
                    .color-swatch {
                        width: 32px;
                        height: 32px;
                    }
                    
                    .combination-name {
                        font-size: 1em;
                    }
                    
                    .combination-description {
                        font-size: 0.85em;
                    }
                    
                    .tag {
                        font-size: 0.7em;
                        padding: 3px 8px;
                    }
                    
                    .color-alternatives {
                        padding: 10px;
                    }
                    
                    .alternatives-header {
                        font-size: 0.8em;
                    }
                    
                    .alt-color-swatch {
                        width: 14px;
                        height: 14px;
                    }
                    
                    .color-actions {
                        flex-direction: column;
                        gap: 6px;
                    }
                    
                    .color-action-btn {
                        padding: 8px 10px;
                        font-size: 0.75em;
                    }
                }
                
                @media (max-width: 480px) {
                    .weather-widget-enhanced {
                        padding: 12px;
                    }
                    
                    .weather-icon-large {
                        font-size: 2.5em;
                    }
                    
                    .weather-temp-large {
                        font-size: 1.6em;
                    }
                    
                    .weather-condition-large {
                        font-size: 0.9em;
                    }
                    
                    .weather-location {
                        font-size: 0.8em;
                    }
                    
                    .forecast-day {
                        padding: 6px 3px;
                    }
                    
                    .forecast-day-name {
                        font-size: 0.6em;
                    }
                    
                    .forecast-day-icon {
                        font-size: 1em;
                    }
                    
                    .forecast-day-temp {
                        font-size: 0.7em;
                    }
                }
            </style>

            <div class="dashboard-grid">
                <!-- Personalized Welcome Section -->
                <div class="welcome-section-main">
                    <h1 class="welcome-title" id="personalizedGreeting">Good morning!</h1>
                    <p class="welcome-subtitle">Your AI-powered personal stylist and wardrobe manager</p>
                </div>

                <!-- Main Panels -->
                <div class="main-panels-new">
                    <!-- Left Column: Outfit of the Day -->
                    <div class="left-column">
                        <!-- Simplified Outfit of the Day Card -->
                        <div class="outfit-of-day-card">
                            <div class="outfit-header">
                                <h2><i class="fas fa-tshirt"></i> Outfit for Today</h2>
                                <span class="outfit-badge">AI Suggested</span>
                            </div>
                            
                            <div class="outfit-preview" id="outfitPreview">
                                <div class="outfit-items-grid" id="outfitItemsGrid">
                                    <!-- Outfit items will be displayed here -->
                                </div>
                            </div>
                            
                            <div class="outfit-actions">
                                <button class="outfit-btn wear-btn" id="wearOutfitBtn">
                                    <i class="fas fa-check-circle"></i> Wear This
                                </button>
                                <button class="outfit-btn edit-btn" id="editOutfitBtn">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>


                        <!-- Upcoming Events (Compact) -->
                        <div class="events-panel-compact">
                            <h3><i class="fas fa-calendar-alt"></i> Upcoming Events</h3>
                            <div class="events-list-compact" id="eventsList">
                            <!-- Events will be added dynamically -->
                        </div>
                    </div>
                </div>

                    <!-- Right Column: Weather + Calendar -->
                    <div class="right-column">
                        <!-- Simple Weather Widget -->
                        <div class="weather-widget-simple">
                            <div class="weather-header">
                                <h3><i class="fas fa-cloud-sun"></i> Weather</h3>
                                <button class="weather-refresh-btn" id="weatherRefreshBtn" title="Refresh weather">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                            
                            <div class="weather-main">
                                <div class="weather-icon" id="weatherIcon">☀️</div>
                                <div class="weather-info">
                                    <div class="weather-temp" id="weatherTemp">24°C</div>
                                    <div class="weather-condition" id="weatherCondition">Clear</div>
                                    <div class="weather-location" id="weatherLocation">Loading...</div>
                                </div>
                            </div>
                            
                            <div class="weather-outfit-suggestion" id="weatherOutfitSuggestion">
                                <div class="outfit-suggestion-text">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>Perfect weather for light layers!</span>
                                </div>
                            </div>
                        </div>

                        <!-- Compressed Color Combination Widget -->
                        <div class="color-combination-widget-compact">
                            <div class="color-combination-header-compact">
                                <h3><i class="fas fa-palette"></i> Color Combos</h3>
                                <button class="color-refresh-btn-compact" id="colorRefreshBtn" title="Get new combinations">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                            
                            <div class="color-combination-main-compact" id="colorCombinationMain">
                                <!-- Main color combination will be displayed here -->
                            </div>
                            
                            <div class="combination-name-compact" id="combinationName">Classic Monochrome</div>
                            
                            <div class="alternative-combinations-compact" id="alternativeCombinations">
                                <!-- Alternative combinations will be displayed here -->
                            </div>
                            
                            <div class="color-actions-compact">
                                <button class="color-action-btn-compact" id="saveCombinationBtn" title="Save combination">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <button class="color-action-btn-compact" id="applyCombinationBtn" title="Apply to outfit">
                                    <i class="fas fa-magic"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Calendar Widget -->
                        <div class="calendar-widget">
                            <div class="calendar-header">
                                <button class="calendar-nav-btn" id="prevMonth">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <h3 class="calendar-title" id="calendarTitle">October 2025</h3>
                                <button class="calendar-nav-btn" id="nextMonth">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                        </div>
                            <div class="calendar-weekdays">
                                <div>Sun</div>
                                <div>Mon</div>
                                <div>Tue</div>
                                <div>Wed</div>
                                <div>Thu</div>
                                <div>Fri</div>
                                <div>Sat</div>
                            </div>
                            <div class="calendar-days" id="calendarDays">
                                <!-- Days will be generated by JavaScript -->
                        </div>
                            <button class="add-event-btn" id="addEventBtn">
                                <i class="fas fa-plus"></i> Add Event
                            </button>
                            </div>
                        </div>

                    </div>
                </div>

            <!-- Event Modal -->
            <div class="event-modal" id="eventModal">
                <div class="event-modal-content">
                    <div class="event-modal-header">
                        <h3>Add New Event</h3>
                        <button class="close-modal" id="closeEventModal">&times;</button>
                            </div>
                    <form id="eventForm">
                        <div class="form-group">
                            <label>Event Title *</label>
                            <input type="text" id="eventTitle" class="form-input" required placeholder="e.g., Business Meeting">
                        </div>
                        <div class="form-group">
                            <label>Date *</label>
                            <input type="date" id="eventDate" class="form-input" required>
                            </div>
                        <div class="form-group">
                            <label>Time *</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="time" id="eventTime" class="form-input" required style="flex: 1;">
                                <select id="eventAmPm" class="form-input" style="width: 80px;">
                                    <option value="AM">AM</option>
                                    <option value="PM">PM</option>
                                </select>
                        </div>
                            </div>
                        <div class="form-group">
                            <label>Icon</label>
                            <div class="icon-picker">
                                <button type="button" class="icon-option" data-icon="💼">💼</button>
                                <button type="button" class="icon-option" data-icon="🍽️">🍽️</button>
                                <button type="button" class="icon-option" data-icon="💪">💪</button>
                                <button type="button" class="icon-option" data-icon="☕">☕</button>
                                <button type="button" class="icon-option" data-icon="🎉">🎉</button>
                                <button type="button" class="icon-option" data-icon="📚">📚</button>
                                <button type="button" class="icon-option" data-icon="✈️">✈️</button>
                                <button type="button" class="icon-option" data-icon="🎬">🎬</button>
                        </div>
                            <input type="hidden" id="eventIcon" value="📅">
                    </div>
                        <div class="form-group">
                            <label>Outfit Suggestion (Optional)</label>
                            <input type="text" id="eventOutfit" class="form-input" placeholder="e.g., Formal: Shirt + Trousers">
                    </div>
                        <button type="submit" class="submit-event-btn">
                            <i class="fas fa-check"></i> Add Event
                        </button>
                    </form>
                </div>
            </div>

            <!-- AI Assistant Bubble -->
            <div class="ai-assistant-bubble">
                <button class="ai-bubble-btn" id="aiAssistantBtn">
                    <i class="fas fa-robot" style="font-size: 1.2em;"></i>
                </button>
                <div class="ai-chat-panel" id="aiChatPanel">
                    <div class="ai-chat-header">
                        <i class="fas fa-brain" style="color: #7c3aed;"></i> AI Assistant
                    </div>
                    <div class="ai-chat-messages" id="aiChatMessages">
                        <div class="ai-message">
                            <div class="ai-message-avatar"><i class="fas fa-robot" style="color: #06b6d4;"></i></div>
                            <div class="ai-message-content">
                                Hi! I'm your AI wardrobe assistant. How can I help you today?
                            </div>
                        </div>
                    </div>
                    <div class="ai-suggestions">
                        <button class="ai-suggestion-btn" onclick="askAI('what-to-wear')">
                            What should I wear today?
                        </button>
                        <button class="ai-suggestion-btn" onclick="askAI('rainy-day')">
                            Show me rainy day outfits
                        </button>
                        <button class="ai-suggestion-btn" onclick="askAI('evening-party')">
                            Suggest outfit for evening party
                        </button>
                        <button class="ai-suggestion-btn" onclick="askAI('analyze')">
                            Analyze my wardrobe usage
                        </button>
                    </div>
                    <div class="ai-input-container">
                        <input type="text" id="aiChatInput" placeholder="Or type your own question..." class="ai-chat-input">
                        <button onclick="sendCustomMessage()" class="ai-send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <script>
                // Global calendar state
                let currentMonth = new Date().getMonth();
                let currentYear = new Date().getFullYear();
                let calendarEvents = userDB.loadUserData('calendarEvents', []);

                // Global weather state
                let currentWeather = userDB.loadUserData('currentWeather', { 
                    temp: 24, 
                    condition: 'Clear',
                    location: 'Auto-detect',
                    feelsLike: 26,
                    humidity: 65,
                    windSpeed: 5,
                    visibility: 10
                });

                // Initialize Dashboard
                document.addEventListener('DOMContentLoaded', function() {
                    setPersonalizedGreeting();
                    initializeEnhancedWeather();
                    initializeColorCombinations();
                    renderCalendar();
                    loadEvents();
                    generateOutfitOfTheDay();
                    setupEventModal();
                    setupAIAssistant();
                    setupOutfitActions();
                    setupEnhancedOutfitFeatures();
                    
                    // Simple sidebar toggle function
                    window.toggleSidebar = function() {
                        document.body.classList.toggle('sidebar-collapsed');
                        const isCollapsed = document.body.classList.contains('sidebar-collapsed');
                        const label = document.querySelector('.label');
                        const icon = document.querySelector('.fa-chevron-left');
                        
                        if (label) label.textContent = isCollapsed ? 'Expand' : 'Collapse';
                        if (icon) icon.classList.toggle('fa-rotate-180', isCollapsed);
                        
                        localStorage.setItem('sidebarCollapsed', isCollapsed);
                    };
                    
                    // Update greeting every minute
                    setInterval(setPersonalizedGreeting, 60000);
                });

                // Set Personalized Greeting
                function setPersonalizedGreeting() {
                    const hour = new Date().getHours();
                    let greeting = 'Good morning';
                    
                    // More precise time-based greetings
                    if (hour >= 12 && hour < 17) {
                        greeting = 'Good afternoon';
                    } else if (hour >= 17 && hour < 22) {
                        greeting = 'Good evening';
                    } else if (hour >= 22 || hour < 5) {
                        greeting = 'Good evening'; // Late night/early morning
                    }
                    
                    // Get user name from userDB (proper source)
                    let userName = 'there';
                    if (typeof userDB !== 'undefined' && userDB.currentUser) {
                        userName = userDB.currentUser.name || userDB.currentUser.username || 'there';
                    } else {
                        // Fallback to localStorage if userDB not available
                        const currentUser = localStorage.getItem('currentUser');
                        if (currentUser) {
                            try {
                                if (currentUser.startsWith('{')) {
                                    const userData = JSON.parse(currentUser);
                                    userName = userData.name || userData.username || 'there';
                                } else {
                                    userName = currentUser;
                                }
                            } catch (e) {
                                userName = currentUser;
                            }
                        }
                    }
                    
                    // Update the greeting element
                    const greetingElement = document.getElementById('personalizedGreeting');
                    if (greetingElement) {
                        greetingElement.textContent = `${greeting}, ${userName}!`;
                    }
                }



                // Initialize Enhanced Weather Widget
                function initializeEnhancedWeather() {
                    updateEnhancedWeatherDisplay();
                    generateForecast();
                    setupWeatherInteractions();
                    autoDetectLocation();
                    checkWeatherAlerts();
                }

                // Update Enhanced Weather Display
                function updateEnhancedWeatherDisplay() {
                    const weatherIconLarge = document.getElementById('weatherIconLarge');
                    const weatherTempLarge = document.getElementById('weatherTempLarge');
                    const weatherConditionLarge = document.getElementById('weatherConditionLarge');
                    const weatherLocation = document.getElementById('weatherLocation');
                    const feelsLike = document.getElementById('feelsLike');
                    const humidity = document.getElementById('humidity');
                    const windSpeed = document.getElementById('windSpeed');
                    const visibility = document.getElementById('visibility');
                    const outfitSuggestionContent = document.getElementById('outfitSuggestionContent');
                    
                    if (weatherIconLarge) {
                        weatherIconLarge.textContent = getWeatherEmoji(currentWeather.condition);
                    }
                    
                    if (weatherTempLarge) {
                        weatherTempLarge.textContent = `${currentWeather.temp}°C`;
                    }
                    
                    if (weatherConditionLarge) {
                        weatherConditionLarge.textContent = currentWeather.condition;
                    }
                    
                    if (weatherLocation) {
                        weatherLocation.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${currentWeather.location}`;
                    }
                    
                    if (feelsLike) {
                        feelsLike.textContent = `${currentWeather.feelsLike}°C`;
                    }
                    
                    if (humidity) {
                        humidity.textContent = `${currentWeather.humidity}%`;
                    }
                    
                    if (windSpeed) {
                        windSpeed.textContent = `${currentWeather.windSpeed} km/h`;
                    }
                    
                    if (visibility) {
                        visibility.textContent = `${currentWeather.visibility} km`;
                    }
                    
                    if (outfitSuggestionContent) {
                        outfitSuggestionContent.textContent = generateOutfitSuggestion(currentWeather);
                    }
                }

                // Get Weather Emoji
                function getWeatherEmoji(condition) {
                    const icons = {
                        'Sunny': '☀️',
                        'Clear': '☀️',
                        'Cloudy': '☁️',
                        'Rain': '🌧️',
                        'Rainy': '🌧️',
                        'Snow': '❄️',
                        'Snowy': '❄️',
                        'Windy': '💨',
                        'Storm': '⛈️',
                        'Hot': '🔥',
                        'Partly Cloudy': '⛅'
                    };
                    return icons[condition] || '☀️';
                }

                // Generate Outfit Suggestion
                function generateOutfitSuggestion(weather) {
                    const temp = weather.temp;
                    const condition = weather.condition.toLowerCase();
                    
                    if (temp < 0) {
                        return "Bundle up! Heavy winter coat, thermal layers, and warm accessories recommended.";
                    } else if (temp < 10) {
                        return "Cold weather! Wear warm layers with a jacket and closed shoes.";
                    } else if (temp < 15) {
                        return "Cool day! A light jacket with long sleeves would be perfect.";
                    } else if (temp < 20) {
                        return "Mild weather! Comfortable layers like a hoodie or cardigan.";
                    } else if (temp < 25) {
                        return "Nice weather! Light clothing like t-shirts and comfortable pants.";
                    } else if (temp < 30) {
                        return "Warm day! Stay cool with light fabrics and breathable clothing.";
                    } else {
                        return "Hot weather! Minimal, breathable clothing and sun protection needed.";
                    }
                }

                // Generate 3-Day Forecast
                function generateForecast() {
                    const forecastDays = document.getElementById('forecastDays');
                    if (!forecastDays) return;
                    
                    const today = new Date();
                    const forecast = [];
                    
                    for (let i = 1; i <= 3; i++) {
                        const date = new Date(today);
                        date.setDate(today.getDate() + i);
                        
                        // Generate mock forecast data
                        const conditions = ['Clear', 'Cloudy', 'Rain', 'Sunny'];
                        const condition = conditions[Math.floor(Math.random() * conditions.length)];
                        const baseTemp = currentWeather.temp;
                        const tempVariation = (Math.random() - 0.5) * 8; // ±4°C variation
                        const temp = Math.round(baseTemp + tempVariation);
                        
                        forecast.push({
                            day: date.toLocaleDateString('en-US', { weekday: 'short' }),
                            condition: condition,
                            temp: temp,
                            icon: getWeatherEmoji(condition)
                        });
                    }
                    
                    forecastDays.innerHTML = forecast.map(day => `
                        <div class="forecast-day">
                            <div class="forecast-day-name">${day.day}</div>
                            <div class="forecast-day-icon">${day.icon}</div>
                            <div class="forecast-day-temp">${day.temp}°C</div>
                        </div>
                    `).join('');
                }

                // Setup Weather Interactions
                function setupWeatherInteractions() {
                    // Refresh button
                    const refreshBtn = document.getElementById('weatherRefreshBtn');
                    if (refreshBtn) {
                        refreshBtn.addEventListener('click', () => {
                            refreshBtn.style.animation = 'spin 1s linear';
                            setTimeout(() => {
                                refreshBtn.style.animation = '';
                                updateWeatherData();
                            }, 1000);
                        });
                    }
                    
                    // Detailed forecast button
                    const detailedBtn = document.getElementById('getDetailedWeather');
                    if (detailedBtn) {
                        detailedBtn.addEventListener('click', () => {
                            window.location.href = 'weather-stylist.html';
                        });
                    }
                    
                    // Change location button
                    const locationBtn = document.getElementById('changeLocation');
                    if (locationBtn) {
                        locationBtn.addEventListener('click', () => {
                            showLocationModal();
                        });
                    }
                }

                // Auto-detect Location
                function autoDetectLocation() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(
                            (position) => {
                                // Simulate location detection
                                const cities = ['London', 'New York', 'Tokyo', 'Paris', 'Dubai', 'Mumbai', 'Sydney'];
                                const randomCity = cities[Math.floor(Math.random() * cities.length)];
                                currentWeather.location = randomCity;
                                updateEnhancedWeatherDisplay();
                            },
                            (error) => {
                                currentWeather.location = 'Location unavailable';
                                updateEnhancedWeatherDisplay();
                            }
                        );
                    } else {
                        currentWeather.location = 'Location not supported';
                        updateEnhancedWeatherDisplay();
                    }
                }

                // Update Weather Data
                function updateWeatherData() {
                    // Simulate weather data update
                    const conditions = ['Clear', 'Cloudy', 'Rain', 'Sunny', 'Windy', 'Snow', 'Storm'];
                    const newCondition = conditions[Math.floor(Math.random() * conditions.length)];
                    const tempVariation = (Math.random() - 0.5) * 6; // ±3°C variation
                    
                    currentWeather = {
                        ...currentWeather,
                        temp: Math.round(currentWeather.temp + tempVariation),
                        condition: newCondition,
                        feelsLike: Math.round(currentWeather.temp + tempVariation + (Math.random() - 0.5) * 4),
                        humidity: Math.round(50 + Math.random() * 40),
                        windSpeed: Math.round(2 + Math.random() * 15),
                        visibility: Math.round(5 + Math.random() * 10)
                    };
                    
                    userDB.saveUserData('currentWeather', currentWeather);
                    updateEnhancedWeatherDisplay();
                    generateForecast();
                    checkWeatherAlerts(); // Check for new alerts after update
                    showNotification('Weather data updated!', 'success');
                }

                // Show Location Modal
                function showLocationModal() {
                    const city = prompt('Enter your city name:', currentWeather.location);
                    if (city && city.trim()) {
                        currentWeather.location = city.trim();
                        userDB.saveUserData('currentWeather', currentWeather);
                        updateEnhancedWeatherDisplay();
                        showNotification(`Location updated to ${city}`, 'success');
                    }
                }

                // Color Combination System
                let currentColorCombination = null;
                let savedCombinations = userDB.loadUserData('savedColorCombinations', []);

                // Initialize Color Combinations
                function initializeColorCombinations() {
                    generateColorCombination();
                    setupColorInteractions();
                }

                // Generate Color Combination
                function generateColorCombination() {
                    const colorCombinations = [
                        {
                            name: "Classic Monochrome",
                            colors: ["#000000", "#FFFFFF", "#808080"],
                            description: "Perfect for professional settings and elegant occasions",
                            tags: ["Professional", "Timeless", "Elegant"]
                        },
                        {
                            name: "Ocean Breeze",
                            colors: ["#0066CC", "#87CEEB", "#FFFFFF"],
                            description: "Fresh and calming, ideal for casual summer days",
                            tags: ["Casual", "Summer", "Fresh"]
                        },
                        {
                            name: "Sunset Glow",
                            colors: ["#FF6B6B", "#FFE66D", "#FF8E53"],
                            description: "Warm and vibrant, perfect for evening events",
                            tags: ["Evening", "Warm", "Vibrant"]
                        },
                        {
                            name: "Forest Harmony",
                            colors: ["#2D5016", "#90EE90", "#8B4513"],
                            description: "Natural and earthy, great for outdoor activities",
                            tags: ["Natural", "Outdoor", "Earthy"]
                        },
                        {
                            name: "Royal Elegance",
                            colors: ["#4B0082", "#9370DB", "#DDA0DD"],
                            description: "Sophisticated and luxurious, perfect for special occasions",
                            tags: ["Luxury", "Sophisticated", "Special"]
                        },
                        {
                            name: "Minimalist Chic",
                            colors: ["#F5F5F5", "#D3D3D3", "#A9A9A9"],
                            description: "Clean and modern, ideal for contemporary style",
                            tags: ["Modern", "Clean", "Minimalist"]
                        },
                        {
                            name: "Autumn Warmth",
                            colors: ["#8B4513", "#D2691E", "#F4A460"],
                            description: "Cozy and warm, perfect for fall season",
                            tags: ["Autumn", "Warm", "Cozy"]
                        },
                        {
                            name: "Spring Fresh",
                            colors: ["#98FB98", "#F0E68C", "#FFB6C1"],
                            description: "Light and fresh, ideal for spring days",
                            tags: ["Spring", "Fresh", "Light"]
                        }
                    ];

                    // Select random combination
                    currentColorCombination = colorCombinations[Math.floor(Math.random() * colorCombinations.length)];
                    
                    // Generate alternatives (3 random combinations excluding current)
                    const alternatives = colorCombinations
                        .filter(combo => combo.name !== currentColorCombination.name)
                        .sort(() => Math.random() - 0.5)
                        .slice(0, 3);

                    displayColorCombination(currentColorCombination, alternatives);
                }

                // Display Color Combination
                function displayColorCombination(combination, alternatives) {
                    const mainContainer = document.getElementById('colorCombinationMain');
                    const nameElement = document.getElementById('combinationName');
                    const alternativesContainer = document.getElementById('alternativeCombinations');

                    // Display main combination with compact swatches
                    mainContainer.innerHTML = combination.colors.map(color => `
                        <div class="color-swatch-compact" style="background-color: ${color}" data-color="${color}"></div>
                    `).join('');

                    // Update name
                    nameElement.textContent = combination.name;

                    // Display alternatives with compact swatches
                    alternativesContainer.innerHTML = alternatives.map(alt => `
                        <div class="alternative-combination-compact" onclick="selectAlternativeCombination('${alt.name}')">
                            ${alt.colors.map(color => `<div class="color-swatch-compact" style="background-color: ${color}"></div>`).join('')}
                        </div>
                    `).join('');
                }

                // Select Alternative Combination
                function selectAlternativeCombination(combinationName) {
                    const allCombinations = [
                        {
                            name: "Classic Monochrome",
                            colors: ["#000000", "#FFFFFF", "#808080"],
                            description: "Perfect for professional settings and elegant occasions",
                            tags: ["Professional", "Timeless", "Elegant"]
                        },
                        {
                            name: "Ocean Breeze",
                            colors: ["#0066CC", "#87CEEB", "#FFFFFF"],
                            description: "Fresh and calming, ideal for casual summer days",
                            tags: ["Casual", "Summer", "Fresh"]
                        },
                        {
                            name: "Sunset Glow",
                            colors: ["#FF6B6B", "#FFE66D", "#FF8E53"],
                            description: "Warm and vibrant, perfect for evening events",
                            tags: ["Evening", "Warm", "Vibrant"]
                        },
                        {
                            name: "Forest Harmony",
                            colors: ["#2D5016", "#90EE90", "#8B4513"],
                            description: "Natural and earthy, great for outdoor activities",
                            tags: ["Natural", "Outdoor", "Earthy"]
                        },
                        {
                            name: "Royal Elegance",
                            colors: ["#4B0082", "#9370DB", "#DDA0DD"],
                            description: "Sophisticated and luxurious, perfect for special occasions",
                            tags: ["Luxury", "Sophisticated", "Special"]
                        },
                        {
                            name: "Minimalist Chic",
                            colors: ["#F5F5F5", "#D3D3D3", "#A9A9A9"],
                            description: "Clean and modern, ideal for contemporary style",
                            tags: ["Modern", "Clean", "Minimalist"]
                        },
                        {
                            name: "Autumn Warmth",
                            colors: ["#8B4513", "#D2691E", "#F4A460"],
                            description: "Cozy and warm, perfect for fall season",
                            tags: ["Autumn", "Warm", "Cozy"]
                        },
                        {
                            name: "Spring Fresh",
                            colors: ["#98FB98", "#F0E68C", "#FFB6C1"],
                            description: "Light and fresh, ideal for spring days",
                            tags: ["Spring", "Fresh", "Light"]
                        }
                    ];

                    const selectedCombination = allCombinations.find(combo => combo.name === combinationName);
                    if (selectedCombination) {
                        currentColorCombination = selectedCombination;
                        displayColorCombination(selectedCombination, []);
                        showNotification(`Selected ${combinationName}`, 'success');
                    }
                }

                // Setup Color Interactions
                function setupColorInteractions() {
                    // Refresh button
                    const refreshBtn = document.getElementById('colorRefreshBtn');
                    if (refreshBtn) {
                        refreshBtn.addEventListener('click', () => {
                            refreshBtn.style.animation = 'spin 1s linear';
                            setTimeout(() => {
                                refreshBtn.style.animation = '';
                                generateColorCombination();
                                showNotification('New color combination generated!', 'success');
                            }, 1000);
                        });
                    }

                    // Save button
                    const saveBtn = document.getElementById('saveCombinationBtn');
                    if (saveBtn) {
                        saveBtn.addEventListener('click', () => {
                            if (currentColorCombination) {
                                // Check if already saved
                                const isAlreadySaved = savedCombinations.some(saved => 
                                    saved.name === currentColorCombination.name
                                );
                                
                                if (isAlreadySaved) {
                                    showNotification('This combination is already saved!', 'info');
                                } else {
                                    savedCombinations.push(currentColorCombination);
                                    userDB.saveUserData('savedColorCombinations', savedCombinations);
                                    showNotification('Color combination saved!', 'success');
                                    
                                    // Update button appearance
                                    saveBtn.innerHTML = '<i class="fas fa-check"></i><span>Saved</span>';
                                    saveBtn.style.background = 'rgba(16, 185, 129, 0.3)';
                                    setTimeout(() => {
                                        saveBtn.innerHTML = '<i class="fas fa-heart"></i><span>Save</span>';
                                        saveBtn.style.background = '';
                                    }, 2000);
                                }
                            }
                        });
                    }

                    // Apply button
                    const applyBtn = document.getElementById('applyCombinationBtn');
                    if (applyBtn) {
                        applyBtn.addEventListener('click', () => {
                            if (currentColorCombination) {
                                // Apply colors to current outfit
                                applyColorsToOutfit(currentColorCombination);
                                showNotification('Colors applied to outfit!', 'success');
                            }
                        });
                    }
                }

                // Apply Colors to Outfit
                function applyColorsToOutfit(combination) {
                    const currentOutfit = userDB.loadUserData('currentOutfit', []);
                    if (currentOutfit.length === 0) {
                        showNotification('No outfit to apply colors to. Generate an outfit first!', 'info');
                        return;
                    }

                    // Update outfit items with suggested colors
                    const updatedOutfit = currentOutfit.map((item, index) => {
                        const suggestedColor = combination.colors[index % combination.colors.length];
                        return {
                            ...item,
                            suggestedColor: suggestedColor,
                            colorApplied: true
                        };
                    });

                    userDB.saveUserData('currentOutfit', updatedOutfit);
                    
                    // Refresh outfit display
                    displayOutfit(updatedOutfit);
                    
                    // Show color application notification
                    showNotification(`Applied ${combination.name} colors to your outfit!`, 'success');
                }

                // Check Weather Alerts
                function checkWeatherAlerts() {
                    const alerts = [];
                    const temp = currentWeather.temp;
                    const condition = currentWeather.condition.toLowerCase();
                    const windSpeed = currentWeather.windSpeed;
                    const humidity = currentWeather.humidity;
                    
                    // Temperature alerts
                    if (temp < -5) {
                        alerts.push({
                            type: 'extreme-cold',
                            message: '🥶 Extreme Cold Alert! Temperature below -5°C. Bundle up with heavy winter gear!',
                            severity: 'high'
                        });
                    } else if (temp < 0) {
                        alerts.push({
                            type: 'cold',
                            message: '❄️ Cold Weather Alert! Freezing temperatures. Wear warm layers and protect exposed skin.',
                            severity: 'medium'
                        });
                    } else if (temp > 35) {
                        alerts.push({
                            type: 'extreme-heat',
                            message: '🔥 Extreme Heat Alert! Temperature above 35°C. Stay hydrated and avoid direct sun!',
                            severity: 'high'
                        });
                    } else if (temp > 30) {
                        alerts.push({
                            type: 'heat',
                            message: '☀️ Hot Weather Alert! High temperatures. Wear light, breathable clothing and stay cool.',
                            severity: 'medium'
                        });
                    }
                    
                    // Weather condition alerts
                    if (condition.includes('rain') || condition.includes('storm')) {
                        alerts.push({
                            type: 'rain',
                            message: '🌧️ Rain Alert! Don\'t forget your umbrella and waterproof clothing!',
                            severity: 'medium'
                        });
                    }
                    
                    if (condition.includes('snow')) {
                        alerts.push({
                            type: 'snow',
                            message: '❄️ Snow Alert! Icy conditions possible. Wear non-slip footwear and warm clothing!',
                            severity: 'medium'
                        });
                    }
                    
                    // Wind alerts
                    if (windSpeed > 20) {
                        alerts.push({
                            type: 'high-wind',
                            message: '💨 High Wind Alert! Strong winds detected. Secure loose items and be cautious outdoors.',
                            severity: 'medium'
                        });
                    }
                    
                    // Humidity alerts
                    if (humidity > 85) {
                        alerts.push({
                            type: 'high-humidity',
                            message: '💧 High Humidity Alert! Very humid conditions. Choose breathable, moisture-wicking fabrics.',
                            severity: 'low'
                        });
                    }
                    
                    // Display alerts
                    if (alerts.length > 0) {
                        displayWeatherAlerts(alerts);
                    }
                }

                // Display Weather Alerts
                function displayWeatherAlerts(alerts) {
                    // Remove existing alerts
                    const existingAlerts = document.querySelectorAll('.weather-alert');
                    existingAlerts.forEach(alert => alert.remove());
                    
                    // Create alert container
                    const weatherWidget = document.querySelector('.weather-widget-enhanced');
                    if (!weatherWidget) return;
                    
                    const alertContainer = document.createElement('div');
                    alertContainer.className = 'weather-alerts-container';
                    
                    alerts.forEach(alert => {
                        const alertElement = document.createElement('div');
                        alertElement.className = `weather-alert weather-alert-${alert.severity}`;
                        alertElement.innerHTML = `
                            <div class="alert-content">
                                <div class="alert-message">${alert.message}</div>
                                <button class="alert-close" onclick="this.parentElement.parentElement.remove()">×</button>
                            </div>
                        `;
                        alertContainer.appendChild(alertElement);
                    });
                    
                    // Insert alerts at the top of the weather widget
                    weatherWidget.insertBefore(alertContainer, weatherWidget.firstChild);
                    
                    // Auto-remove low severity alerts after 10 seconds
                    alerts.forEach((alert, index) => {
                        if (alert.severity === 'low') {
                            setTimeout(() => {
                                const alertElement = alertContainer.children[index];
                                if (alertElement && alertElement.parentElement) {
                                    alertElement.remove();
                                }
                            }, 10000);
                        }
                    });
                }

                // Load Events
                function loadEvents() {
                    const eventsList = document.getElementById('eventsList');
                    const today = new Date().toISOString().split('T')[0];
                    
                    // Get upcoming events (today and future)
                    const upcomingEvents = calendarEvents
                        .filter(event => event.date >= today)
                        .sort((a, b) => {
                            // Sort completed events to bottom
                            if (a.completed && !b.completed) return 1;
                            if (!a.completed && b.completed) return -1;
                            
                            // Sort by date and time for non-completed events
                            if (a.date === b.date) {
                                return a.time.localeCompare(b.time);
                            }
                            return a.date.localeCompare(b.date);
                        })
                        .slice(0, 5); // Show only next 5 events
                    
                    if (upcomingEvents.length === 0) {
                        eventsList.innerHTML = `
                            <div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.6);">
                                <p>No upcoming events</p>
                                <small>Click the + button to add your first event!</small>
                            </div>
                        `;
                        return;
                    }
                    
                    eventsList.innerHTML = upcomingEvents.map(event => {
                        const eventDate = new Date(event.date);
                        const isToday = event.date === today;
                        const dateStr = isToday ? 'Today' : eventDate.toLocaleDateString('en-US', { 
                            month: 'short', 
                            day: 'numeric' 
                        });
                        
                        // Convert time back to 12-hour format for display
                        let [hours, minutes] = event.time.split(':');
                        hours = parseInt(hours);
                        const ampm = hours >= 12 ? 'PM' : 'AM';
                        const displayHours = hours % 12 || 12;
                        const displayTime = `${displayHours}:${minutes} ${ampm}`;
                        
                        // Check if event is completed
                        const isCompleted = event.completed || false;
                        const completedClass = isCompleted ? 'completed' : '';
                        
                        // Generate priority and category based on event title
                        const priority = getEventPriority(event.title);
                        const category = getEventCategory(event.title);
                        const progress = isCompleted ? 100 : calculateEventProgress(event);
                        
                        return `
                        <div class="event-item-enhanced ${completedClass}">
                            <div class="event-header-enhanced">
                                <div class="event-info-enhanced">
                                    <div class="event-icon-enhanced">${event.icon}</div>
                                    <div>
                                        <div class="event-title-enhanced">${event.title}</div>
                                        <div class="event-time-enhanced">${dateStr} at ${displayTime}</div>
                                        <div style="margin-top: 4px;">
                                            <span class="event-category category-${category}">${category}</span>
                                            <span class="event-priority priority-${priority}">${priority}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="event-actions-enhanced">
                                    ${!isCompleted ? `<button class="event-action-btn-enhanced complete" onclick="completeEvent(${event.id})" title="Mark as completed">
                                        <i class="fas fa-check"></i>
                                    </button>` : ''}
                                    <button class="event-action-btn-enhanced edit" onclick="editEvent(${event.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="event-action-btn-enhanced delete" onclick="deleteEvent(${event.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="event-details-enhanced">
                                ${event.outfit ? `<div class="event-outfit-enhanced">👔 ${event.outfit}</div>` : ''}
                                ${isCompleted ? `<div class="completion-checkbox">
                                    <input type="checkbox" id="completed-${event.id}" checked disabled>
                                    <label for="completed-${event.id}">✓ Completed</label>
                                </div>` : ''}
                            </div>
                            ${!isCompleted ? `
                            <div class="event-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progress}%"></div>
                                </div>
                                <div class="progress-text">${progress}% ready</div>
                            </div>
                            ` : ''}
                        </div>
                        `;
                    }).join('');
                }
                
                // Edit event function
                function editEvent(eventId) {
                    const event = calendarEvents.find(e => e.id === eventId);
                    if (!event) return;
                    
                    // Pre-fill the form
                    document.getElementById('eventTitle').value = event.title;
                    document.getElementById('eventDate').value = event.date;
                    
                    // Convert time to 12-hour format for editing
                    let [hours, minutes] = event.time.split(':');
                    hours = parseInt(hours);
                    const ampm = hours >= 12 ? 'PM' : 'AM';
                    const displayHours = hours % 12 || 12;
                    const displayTime = `${displayHours.toString().padStart(2, '0')}:${minutes}`;
                    
                    document.getElementById('eventTime').value = displayTime;
                    document.getElementById('eventAmPm').value = ampm;
                    document.getElementById('eventOutfit').value = event.outfit || '';
                    
                    // Set icon
                    const iconOptions = document.querySelectorAll('.icon-option');
                    iconOptions.forEach(opt => opt.classList.remove('selected'));
                    const selectedIcon = document.querySelector(`[data-icon="${event.icon}"]`);
                    if (selectedIcon) {
                        selectedIcon.classList.add('selected');
                        document.getElementById('eventIcon').value = event.icon;
                    }
                    
                    // Open modal
                    const modal = document.getElementById('eventModal');
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    
                    // Update form submission to handle edit
                    const form = document.getElementById('eventForm');
                    form.onsubmit = (e) => {
                        e.preventDefault();
                        
                        const title = document.getElementById('eventTitle').value;
                        const date = document.getElementById('eventDate').value;
                        const time = document.getElementById('eventTime').value;
                        const ampm = document.getElementById('eventAmPm').value;
                        const icon = document.getElementById('eventIcon').value;
                        const outfit = document.getElementById('eventOutfit').value;
                        
                        if (!title || !date || !time) {
                            alert('Please fill in all required fields');
                            return;
                        }
                        
                        // Convert time to 24-hour format
                        let [editHours, editMinutes] = time.split(':');
                        editHours = parseInt(editHours);
                        
                        if (ampm === 'PM' && editHours !== 12) {
                            editHours += 12;
                        } else if (ampm === 'AM' && editHours === 12) {
                            editHours = 0;
                        }
                        
                        const formattedTime = `${editHours.toString().padStart(2, '0')}:${editMinutes}`;
                        
                        // Update event
                        const eventIndex = calendarEvents.findIndex(e => e.id === eventId);
                        if (eventIndex !== -1) {
                            calendarEvents[eventIndex] = {
                                id: eventId,
                                title,
                                date,
                                time: formattedTime,
                                icon,
                                outfit: outfit || null
                            };
                            
                            // Save to localStorage
                            userDB.saveUserData('calendarEvents', calendarEvents);
                            
                            // Update calendar and events list
                            renderCalendar();
                            loadEvents();
                            
                            // Close modal and reset form
                            modal.classList.remove('active');
                            document.body.style.overflow = '';
                            form.reset();
                            document.getElementById('eventIcon').value = '📅';
                            iconOptions.forEach(opt => opt.classList.remove('selected'));
                            
                            showNotification('Event updated successfully!', 'success');
                        }
                    };
                }
                
                // Delete event function
                function deleteEvent(eventId) {
                    if (confirm('Are you sure you want to delete this event?')) {
                        calendarEvents = calendarEvents.filter(e => e.id !== eventId);
                        userDB.saveUserData('calendarEvents', calendarEvents);
                        renderCalendar();
                        loadEvents();
                        showNotification('Event deleted successfully!', 'success');
                    }
                }
                
                // Complete event function
                function completeEvent(eventId) {
                    const event = calendarEvents.find(e => e.id === eventId);
                    if (!event) return;
                    
                    if (confirm(`Mark "${event.title}" as completed?`)) {
                        // Update event completion status
                        const eventIndex = calendarEvents.findIndex(e => e.id === eventId);
                        if (eventIndex !== -1) {
                            calendarEvents[eventIndex].completed = true;
                            calendarEvents[eventIndex].completedAt = new Date().toISOString();
                            
                            // Save to localStorage
                            userDB.saveUserData('calendarEvents', calendarEvents);
                            
                            // Update events list
                            loadEvents();
                            
                            showNotification('✅ Event marked as completed!', 'success');
                        }
                    }
                }
                
                // Get event priority based on title
                function getEventPriority(title) {
                    const lowerTitle = title.toLowerCase();
                    if (lowerTitle.includes('urgent') || lowerTitle.includes('important') || lowerTitle.includes('deadline')) {
                        return 'high';
                    } else if (lowerTitle.includes('meeting') || lowerTitle.includes('appointment') || lowerTitle.includes('work')) {
                        return 'medium';
                    } else {
                        return 'low';
                    }
                }
                
                // Get event category based on title
                function getEventCategory(title) {
                    const lowerTitle = title.toLowerCase();
                    if (lowerTitle.includes('work') || lowerTitle.includes('office') || lowerTitle.includes('business') || lowerTitle.includes('meeting')) {
                        return 'work';
                    } else if (lowerTitle.includes('party') || lowerTitle.includes('social') || lowerTitle.includes('friends') || lowerTitle.includes('dinner')) {
                        return 'social';
                    } else {
                        return 'personal';
                    }
                }
                
                // Calculate event progress based on time until event
                function calculateEventProgress(event) {
                    const now = new Date();
                    const eventDate = new Date(event.date + 'T' + event.time);
                    const timeDiff = eventDate.getTime() - now.getTime();
                    const hoursUntilEvent = timeDiff / (1000 * 3600);
                    
                    if (hoursUntilEvent < 0) return 100; // Past event
                    if (hoursUntilEvent < 1) return 90; // Less than 1 hour
                    if (hoursUntilEvent < 6) return 75; // Less than 6 hours
                    if (hoursUntilEvent < 24) return 50; // Less than 1 day
                    if (hoursUntilEvent < 72) return 25; // Less than 3 days
                    return 10; // More than 3 days
                }
                
                // Format event time
                function formatEventTime(date) {
                    const now = new Date();
                    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                    const tomorrow = new Date(today);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    const eventDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());
                    
                    let dayStr = '';
                    if (eventDay.getTime() === today.getTime()) {
                        dayStr = 'Today';
                    } else if (eventDay.getTime() === tomorrow.getTime()) {
                        dayStr = 'Tomorrow';
                    } else {
                        dayStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    }
                    
                    const timeStr = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
                    return `${dayStr}, ${timeStr}`;
                }
                
                // Render Calendar
                function renderCalendar() {
                    const firstDay = new Date(currentYear, currentMonth, 1).getDay();
                    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
                    const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();
                    
                    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                                        'July', 'August', 'September', 'October', 'November', 'December'];
                    
                    document.getElementById('calendarTitle').textContent = `${monthNames[currentMonth]} ${currentYear}`;
                    
                    const calendarDays = document.getElementById('calendarDays');
                    let daysHTML = '';
                    
                    // Previous month days
                    for (let i = firstDay - 1; i >= 0; i--) {
                        const day = daysInPrevMonth - i;
                        const prevMonth = currentMonth - 1;
                        const prevYear = prevMonth < 0 ? currentYear - 1 : currentYear;
                        const actualMonth = prevMonth < 0 ? 11 : prevMonth;
                        const dateStr = `${prevYear}-${String(actualMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        daysHTML += `<div class="calendar-day other-month" data-date="${dateStr}">${day}</div>`;
                    }
                    
                    // Current month days
                    const today = new Date();
                    for (let day = 1; day <= daysInMonth; day++) {
                        const isToday = day === today.getDate() && 
                                       currentMonth === today.getMonth() && 
                                       currentYear === today.getFullYear();
                        
                        const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        const hasEvent = calendarEvents.some(e => e.date === dateStr);
                        const hasCompletedEvent = calendarEvents.some(e => e.date === dateStr && e.completed);
                        const hasPendingEvent = calendarEvents.some(e => e.date === dateStr && !e.completed);
                        
                        const classes = ['calendar-day'];
                        if (isToday) classes.push('today');
                        if (hasEvent) classes.push('has-event');
                        if (hasCompletedEvent) classes.push('has-completed-event');
                        if (hasPendingEvent) classes.push('has-pending-event');
                        
                        daysHTML += `<div class="${classes.join(' ')}" data-date="${dateStr}">${day}</div>`;
                    }
                    
                    // Next month days
                    const remainingDays = 42 - (firstDay + daysInMonth);
                    for (let day = 1; day <= remainingDays; day++) {
                        const nextMonth = currentMonth + 1;
                        const nextYear = nextMonth > 11 ? currentYear + 1 : currentYear;
                        const actualMonth = nextMonth > 11 ? 0 : nextMonth;
                        const dateStr = `${nextYear}-${String(actualMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        daysHTML += `<div class="calendar-day other-month" data-date="${dateStr}">${day}</div>`;
                    }
                    
                    calendarDays.innerHTML = daysHTML;
                    
                    // Add click handlers to all calendar days
                    const dayElements = calendarDays.querySelectorAll('.calendar-day');
                    dayElements.forEach(dayEl => {
                        dayEl.onclick = () => {
                            const selectedDate = dayEl.dataset.date;
                            openEventModalWithDate(selectedDate);
                        };
                    });
                    
                    // Setup navigation
                    document.getElementById('prevMonth').onclick = () => {
                        currentMonth--;
                        if (currentMonth < 0) {
                            currentMonth = 11;
                            currentYear--;
                        }
                        renderCalendar();
                    };
                    
                    document.getElementById('nextMonth').onclick = () => {
                        currentMonth++;
                        if (currentMonth > 11) {
                            currentMonth = 0;
                            currentYear++;
                        }
                        renderCalendar();
                    };
                }
                
                // Open event modal with pre-selected date
                function openEventModalWithDate(date) {
                    const modal = document.getElementById('eventModal');
                    modal.classList.add('active');
                    document.getElementById('eventDate').value = date;
                    // Focus on title input for better UX
                    setTimeout(() => {
                        document.getElementById('eventTitle').focus();
                    }, 100);
                }

                // Setup Event Modal
                function setupEventModal() {
                    const modal = document.getElementById('eventModal');
                    const addBtn = document.getElementById('addEventBtn');
                    const closeBtn = document.getElementById('closeEventModal');
                    const form = document.getElementById('eventForm');
                    const iconOptions = document.querySelectorAll('.icon-option');
                    
                    // Open modal
                    addBtn.onclick = () => {
                        modal.classList.add('active');
                        // Set default date to today
                        const today = new Date().toISOString().split('T')[0];
                        document.getElementById('eventDate').value = today;
                    };
                    
                    // Close modal
                    closeBtn.onclick = () => {
                        modal.classList.remove('active');
                        form.reset();
                        iconOptions.forEach(opt => opt.classList.remove('selected'));
                    };
                    
                    // Close on background click
                    modal.onclick = (e) => {
                        if (e.target === modal) {
                            modal.classList.remove('active');
                            form.reset();
                            iconOptions.forEach(opt => opt.classList.remove('selected'));
                        }
                    };
                    
                    // Icon selection
                    iconOptions.forEach(option => {
                        option.onclick = () => {
                            iconOptions.forEach(opt => opt.classList.remove('selected'));
                            option.classList.add('selected');
                            document.getElementById('eventIcon').value = option.dataset.icon;
                        };
                    });
                    
                    // Form submission
                    form.onsubmit = (e) => {
                        e.preventDefault();
                        
                        const title = document.getElementById('eventTitle').value;
                        const date = document.getElementById('eventDate').value;
                        const time = document.getElementById('eventTime').value;
                        const ampm = document.getElementById('eventAmPm').value;
                        const icon = document.getElementById('eventIcon').value || '📅';
                        const outfit = document.getElementById('eventOutfit').value;
                        
                        if (!title || !date || !time) {
                            alert('Please fill in all required fields');
                            return;
                        }
                        
                        // Convert time to 24-hour format
                        let [hours, minutes] = time.split(':');
                        hours = parseInt(hours);
                        
                        if (ampm === 'PM' && hours !== 12) {
                            hours += 12;
                        } else if (ampm === 'AM' && hours === 12) {
                            hours = 0;
                        }
                        
                        const formattedTime = `${hours.toString().padStart(2, '0')}:${minutes}`;
                        
                        const newEvent = {
                            id: Date.now(),
                            title,
                            date,
                            time: formattedTime,
                            icon,
                            outfit: outfit || null
                        };
                        
                        calendarEvents.push(newEvent);
                        userDB.saveUserData('calendarEvents', calendarEvents);
                        
                        modal.classList.remove('active');
                        form.reset();
                        iconOptions.forEach(opt => opt.classList.remove('selected'));
                        
                        renderCalendar();
                        loadEvents();
                        showNotification('Event added successfully!', 'success');
                    };
                }

                // Generate Outfit of the Day
                function generateOutfitOfTheDay() {
                    const wardrobeItems = userDB.loadUserData('wardrobeItems', []);
                    
                    if (wardrobeItems.length === 0) {
                        document.getElementById('outfitItemsGrid').innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                                <i class="fas fa-tshirt" style="font-size: 3em; margin-bottom: 16px; display: block;"></i>
                                <p>Add items to your wardrobe to get AI outfit suggestions!</p>
                                <a href="wardrobe.html" style="color: #7c3aed; text-decoration: underline; margin-top: 12px; display: inline-block;">Go to Wardrobe</a>
                            </div>
                        `;
                        return;
                    }
                    
                    // AI Logic: Generate outfit based on weather, occasion, and style
                    const categories = {
                        topwear: wardrobeItems.filter(i => i.category === 'topwear'),
                        bottomwear: wardrobeItems.filter(i => i.category === 'bottomwear'),
                        footwear: wardrobeItems.filter(i => i.category === 'footwear'),
                        accessories: wardrobeItems.filter(i => i.category === 'accessories')
                    };
                    
                    const outfit = [];
                    
                    // Pick one from each category (if available)
                    if (categories.topwear.length > 0) {
                        outfit.push(categories.topwear[Math.floor(Math.random() * categories.topwear.length)]);
                    }
                    if (categories.bottomwear.length > 0) {
                        outfit.push(categories.bottomwear[Math.floor(Math.random() * categories.bottomwear.length)]);
                    }
                    if (categories.footwear.length > 0) {
                        outfit.push(categories.footwear[Math.floor(Math.random() * categories.footwear.length)]);
                    }
                    if (categories.accessories.length > 0 && Math.random() > 0.5) {
                        outfit.push(categories.accessories[Math.floor(Math.random() * categories.accessories.length)]);
                    }
                    
                    // Save current outfit
                    userDB.saveUserData('currentOutfit', outfit);
                    
                    // Display outfit
                    displayOutfit(outfit);
                }
                
                // Display Outfit
                function displayOutfit(outfit) {
                    const grid = document.getElementById('outfitItemsGrid');
                    
                    if (outfit.length === 0) {
                        grid.innerHTML = `
                            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                                <p>No outfit available. Add more items to your wardrobe!</p>
                            </div>
                        `;
                        return;
                    }
                    
                    grid.innerHTML = outfit.map(item => `
                        <div class="outfit-item">
                            <div class="outfit-item-image">
                                ${item.image ? `<img src="${item.image}" alt="${item.name}">` : (item.emoji || '👕')}
                            </div>
                            <div class="outfit-item-info">
                                <div class="outfit-item-name">${item.name}</div>
                                <div class="outfit-item-category">${item.category}</div>
                            </div>
                        </div>
                    `).join('');
                }
                
                // Setup Enhanced Outfit Features
                function setupEnhancedOutfitFeatures() {
                    // Setup outfit rating system
                    const ratingStars = document.querySelectorAll('.rating-star');
                    ratingStars.forEach((star, index) => {
                        star.addEventListener('click', () => {
                            const rating = index + 1;
                            setOutfitRating(rating);
                        });
                        
                        star.addEventListener('mouseenter', () => {
                            highlightStars(index + 1);
                        });
                    });
                    
                    const ratingContainer = document.getElementById('outfitRating');
                    if (ratingContainer) {
                        ratingContainer.addEventListener('mouseleave', () => {
                            const currentRating = userDB.loadUserData('currentOutfitRating', 0);
                            highlightStars(currentRating);
                        });
                    }
                    
                    // Update outfit stats and suggestions
                    updateOutfitStats();
                    updateOutfitSuggestions();
                }
                
                // Set outfit rating
                function setOutfitRating(rating) {
                    userDB.saveUserData('currentOutfitRating', rating);
                    highlightStars(rating);
                    showNotification(`Outfit rated ${rating} stars!`, 'success');
                }
                
                // Highlight stars based on rating
                function highlightStars(rating) {
                    const stars = document.querySelectorAll('.rating-star');
                    stars.forEach((star, index) => {
                        if (index < rating) {
                            star.classList.add('active');
                        } else {
                            star.classList.remove('active');
                        }
                    });
                }
                
                // Update outfit stats
                function updateOutfitStats() {
                    const outfit = userDB.loadUserData('currentOutfit', []);
                    const weather = currentWeather;
                    
                    // Calculate style score
                    const styleScore = Math.floor(75 + Math.random() * 20); // 75-95%
                    document.getElementById('outfitScore').textContent = `${styleScore}%`;
                    
                    // Calculate weather match
                    const weatherMatch = calculateWeatherMatch(outfit, weather);
                    document.getElementById('weatherMatch').textContent = `${weatherMatch}%`;
                    
                    // Calculate comfort level
                    const comfortLevel = Math.floor(80 + Math.random() * 15); // 80-95%
                    document.getElementById('comfortLevel').textContent = `${comfortLevel}%`;
                    
                    // Update weather match indicator
                    updateWeatherMatchIndicator(weatherMatch);
                }
                
                // Calculate weather match percentage
                function calculateWeatherMatch(outfit, weather) {
                    const temp = weather.temp;
                    let match = 50; // Base match
                    
                    // Temperature-based matching
                    if (temp < 10) {
                        match += outfit.some(item => item.category === 'outerwear') ? 30 : -20;
                    } else if (temp > 25) {
                        match += outfit.some(item => item.category === 'topwear' && item.name.toLowerCase().includes('light')) ? 30 : -20;
                    } else {
                        match += 20; // Good temperature range
                    }
                    
                    // Weather condition matching
                    if (weather.condition.toLowerCase().includes('rain')) {
                        match += outfit.some(item => item.name.toLowerCase().includes('waterproof')) ? 20 : -15;
                    }
                    
                    return Math.min(100, Math.max(0, match));
                }
                
                // Update weather match indicator
                function updateWeatherMatchIndicator(match) {
                    const indicator = document.getElementById('weatherMatchIndicator');
                    const icon = indicator.querySelector('.weather-match-icon');
                    const text = indicator.querySelector('.weather-match-text');
                    
                    if (match >= 90) {
                        icon.textContent = '🌤️';
                        text.textContent = 'Perfect match for current weather conditions!';
                        indicator.style.background = 'rgba(16, 185, 129, 0.15)';
                        indicator.style.borderColor = 'rgba(16, 185, 129, 0.3)';
                    } else if (match >= 70) {
                        icon.textContent = '⛅';
                        text.textContent = 'Good match for current weather!';
                        indicator.style.background = 'rgba(245, 158, 11, 0.15)';
                        indicator.style.borderColor = 'rgba(245, 158, 11, 0.3)';
                    } else {
                        icon.textContent = '🌧️';
                        text.textContent = 'Consider adjusting for weather conditions';
                        indicator.style.background = 'rgba(239, 68, 68, 0.15)';
                        indicator.style.borderColor = 'rgba(239, 68, 68, 0.3)';
                    }
                }
                
                // Update outfit suggestions
                function updateOutfitSuggestions() {
                    const suggestions = generateOutfitSuggestions();
                    const container = document.getElementById('outfitSuggestions');
                    const suggestionItems = container.querySelectorAll('.suggestion-item');
                    
                    suggestions.forEach((suggestion, index) => {
                        if (suggestionItems[index]) {
                            suggestionItems[index].querySelector('span:last-child').textContent = suggestion.text;
                            suggestionItems[index].querySelector('.suggestion-icon').textContent = suggestion.icon;
                        }
                    });
                }
                
                // Generate outfit suggestions
                function generateOutfitSuggestions() {
                    const suggestions = [
                        { icon: '💡', text: 'Add a light jacket for evening' },
                        { icon: '👟', text: 'Consider comfortable walking shoes' },
                        { icon: '🎒', text: 'Perfect for a casual day out' },
                        { icon: '☀️', text: 'Great for sunny weather' }
                    ];
                    
                    // Randomize suggestions
                    return suggestions.sort(() => Math.random() - 0.5).slice(0, 2);
                }
                
                // Setup Outfit Actions
                function setupOutfitActions() {
                    // Wear This button
                    document.getElementById('wearOutfitBtn').addEventListener('click', () => {
                        const outfit = userDB.loadUserData('currentOutfit', []);
                        if (outfit.length > 0) {
                            // Save to worn history
                            const wornHistory = userDB.loadUserData('wornHistory', []);
                            wornHistory.push({
                                outfit: outfit,
                                date: new Date().toISOString(),
                                items: outfit.map(i => i.name).join(', ')
                            });
                            userDB.saveUserData('wornHistory', wornHistory);
                            
                            // Show success message
                            showNotification('✅ Outfit marked as worn for today!', 'success');
                        }
                    });
                    
                    // Shuffle button
                    document.getElementById('shuffleOutfitBtn').addEventListener('click', () => {
                        generateOutfitOfTheDay();
                        showNotification('🔄 New outfit generated!', 'info');
                    });
                    
                    // Edit button
                    document.getElementById('editOutfitBtn').addEventListener('click', () => {
                        window.location.href = 'wardrobe.html';
                    });
                }
                
                // Show Notification
                function showNotification(message, type) {
                    const notification = document.createElement('div');
                    notification.style.cssText = `
                        position: fixed;
                        top: 100px;
                        right: 32px;
                        background: ${type === 'success' ? 'linear-gradient(135deg, #10b981, #059669)' : 'linear-gradient(135deg, #7c3aed, #6d28d9)'};
                        color: white;
                        padding: 16px 24px;
                        border-radius: 12px;
                        box-shadow: 0 8px 24px rgba(0,0,0,0.3);
                        z-index: 10000;
                        animation: slideInRight 0.4s ease;
                        font-weight: 600;
                    `;
                    notification.textContent = message;
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        notification.style.animation = 'slideOutRight 0.4s ease';
                        setTimeout(() => notification.remove(), 400);
                    }, 3000);
                }

                // Setup AI Assistant
                function setupAIAssistant() {
                    const btn = document.getElementById('aiAssistantBtn');
                    const panel = document.getElementById('aiChatPanel');
                    
                    btn.addEventListener('click', () => {
                        panel.classList.toggle('active');
                    });
                    
                    // Close panel when clicking outside
                    document.addEventListener('click', (e) => {
                        if (!e.target.closest('.ai-assistant-bubble')) {
                            panel.classList.remove('active');
                        }
                    });
                }

                // AI Interaction - Mock responses for better UX
                async function askAI(query) {
                    const queryMap = {
                        'what-to-wear': 'What should I wear today based on the current weather?',
                        'rainy-day': 'Show me outfit suggestions for a rainy day',
                        'evening-party': 'Suggest a stylish outfit for an evening party',
                        'analyze': 'Analyze my wardrobe and give me tips on organization and usage'
                    };
                    
                    const message = queryMap[query] || query;
                    await sendMessageToAI(message);
                }
                
                // Send custom message
                async function sendCustomMessage() {
                    const input = document.getElementById('aiChatInput');
                    const message = input.value.trim();
                    
                    if (!message) return;
                    
                    // Add user message to chat
                    const chatMessages = document.getElementById('aiChatMessages');
                    const userDiv = document.createElement('div');
                    userDiv.className = 'ai-message';
                    userDiv.innerHTML = `
                        <div class="ai-message-avatar">👤</div>
                        <div class="ai-message-content">${message}</div>
                    `;
                    chatMessages.appendChild(userDiv);
                    
                    // Clear input
                    input.value = '';
                    
                    // Send to AI
                    await sendMessageToAI(message);
                }
                
                // Send message to AI with mock responses
                async function sendMessageToAI(message) {
                    const chatMessages = document.getElementById('aiChatMessages');
                    
                    // Add loading indicator
                    const loadingDiv = document.createElement('div');
                    loadingDiv.className = 'ai-message';
                    loadingDiv.id = 'ai-loading';
                    loadingDiv.innerHTML = `
                        <div class="ai-message-avatar">🤖</div>
                        <div class="ai-message-content">Thinking...</div>
                    `;
                    chatMessages.appendChild(loadingDiv);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Simulate AI thinking time
                    setTimeout(() => {
                        // Remove loading indicator
                        loadingDiv.remove();
                        
                        // Generate mock response based on message
                        const response = generateMockResponse(message);
                        
                            const responseDiv = document.createElement('div');
                            responseDiv.className = 'ai-message';
                            responseDiv.innerHTML = `
                                <div class="ai-message-avatar">🤖</div>
                            <div class="ai-message-content">${response}</div>
                            `;
                            chatMessages.appendChild(responseDiv);
                        
                        // Scroll to bottom
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 1000 + Math.random() * 1000); // Random delay between 1-2 seconds
                }
                
                // Generate mock AI responses
                function generateMockResponse(message) {
                    const lowerMessage = message.toLowerCase();
                    
                    // Greeting responses
                    if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                        const greetings = [
                            "Hello! 👋 I'm your AI wardrobe assistant. How can I help you today?",
                            "Hi there! Ready to find the perfect outfit?",
                            "Hey! I'm here to help you look amazing. What do you need?",
                            "Hello! Let's make you look fabulous today! ✨"
                        ];
                        return greetings[Math.floor(Math.random() * greetings.length)];
                    }
                    
                    // Weather-related responses
                    if (lowerMessage.includes('weather') || lowerMessage.includes('rain') || lowerMessage.includes('cold') || lowerMessage.includes('hot')) {
                        const weatherResponses = [
                            "Based on today's weather, I'd suggest layering with a light jacket and comfortable shoes. Don't forget an umbrella! ☔",
                            "For this weather, try a breathable cotton top with jeans and sneakers. Perfect for staying comfortable!",
                            "I recommend wearing light colors and breathable fabrics. A nice t-shirt with shorts would be ideal!",
                            "Given the weather conditions, layer up with a cozy sweater and comfortable pants. Stay warm! 🧥"
                        ];
                        return weatherResponses[Math.floor(Math.random() * weatherResponses.length)];
                    }
                    
                    // Outfit suggestions
                    if (lowerMessage.includes('outfit') || lowerMessage.includes('wear') || lowerMessage.includes('suggest')) {
                        const outfitResponses = [
                            "I'd suggest pairing your blue jeans with a white t-shirt and sneakers for a casual look! 👕",
                            "How about a nice blouse with dark pants and loafers? Perfect for a professional setting!",
                            "For a stylish look, try a denim jacket over a graphic tee with your favorite sneakers!",
                            "I recommend a flowy dress with sandals for a feminine and comfortable outfit! 👗"
                        ];
                        return outfitResponses[Math.floor(Math.random() * outfitResponses.length)];
                    }
                    
                    // Wardrobe analysis
                    if (lowerMessage.includes('analyze') || lowerMessage.includes('wardrobe') || lowerMessage.includes('clothes')) {
                        const analysisResponses = [
                            "Your wardrobe has great variety! I notice you have more tops than bottoms - consider adding some versatile pants! 📊",
                            "Based on your items, you prefer casual styles. Try mixing in some formal pieces for special occasions!",
                            "Your color palette is well-balanced! I'd suggest adding some accessories to complete your looks! 🎨",
                            "Great collection! You have good basics covered. Consider adding statement pieces for more variety!"
                        ];
                        return analysisResponses[Math.floor(Math.random() * analysisResponses.length)];
                    }
                    
                    // General helpful responses
                    const generalResponses = [
                        "That's a great question! I'd be happy to help you with outfit suggestions or wardrobe tips!",
                        "I'm here to help you look your best! Try asking about weather-appropriate outfits or style advice!",
                        "Let me know if you need help with outfit coordination or wardrobe organization!",
                        "I can help you with styling tips, outfit suggestions, or wardrobe analysis. What would you like to know?",
                        "Great! I'm excited to help you create amazing outfits. What specific advice do you need?",
                        "I love helping with fashion! Whether it's casual, formal, or seasonal outfits - I've got you covered! ✨"
                    ];
                    return generalResponses[Math.floor(Math.random() * generalResponses.length)];
                }
                
                // Allow Enter key to send message
                document.addEventListener('DOMContentLoaded', function() {
                    const input = document.getElementById('aiChatInput');
                    if (input) {
                        input.addEventListener('keypress', function(e) {
                            if (e.key === 'Enter') {
                                sendCustomMessage();
                            }
                        });
                    }
                });

            </script>
        </main>
    </div>

</body>
</html>