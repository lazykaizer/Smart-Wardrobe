<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Wardrobe - Smart Wardrobe</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="users.js"></script>
    <script src="tutorial.js"></script>
    <script src="script.js"></script>
    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            if (!userDB.isLoggedIn()) {
                window.location.href = 'login.html';
            }
            
            // Logout functionality
            document.getElementById('logout-btn-main').addEventListener('click', function() {
                if (confirm('Are you sure you want to logout?')) {
                    userDB.logoutUser();
                    sessionStorage.clear();
                    localStorage.removeItem('isLoggedIn');
                    window.location.href = 'landing.html';
                }
            });

            // Settings functionality
            document.getElementById('settings-btn-main').addEventListener('click', function() {
                window.location.href = 'settings.html';
            });
        });

        // Simple sidebar toggle function
        window.toggleSidebar = function() {
            document.body.classList.toggle('sidebar-collapsed');
            const isCollapsed = document.body.classList.contains('sidebar-collapsed');
            const label = document.querySelector('.label');
            const icon = document.querySelector('.fa-chevron-left');
            
            if (label) label.textContent = isCollapsed ? 'Expand' : 'Collapse';
            if (icon) icon.classList.toggle('fa-rotate-180', isCollapsed);
            
            localStorage.setItem('sidebarCollapsed', isCollapsed);
        };
    </script>
</head>
<body>

    <aside class="app-sidebar">
        <div class="app-header">
            <img src="assets/logo.png" alt="Logo"/>
            <h1 class="app-title">Smart Wardrobe</h1>
        </div>
        <nav class="app-nav" data-active="1">
            <div class="nav-glider-container">
                <div class="nav-glider"></div>
            </div>
            <a href="index.html" class="nav-link">
                <i class="fas fa-home"></i><span class="nav-link-text">Dashboard</span>
            </a>
            <a href="wardrobe.html" class="nav-link active">
                <i class="fas fa-tshirt"></i><span class="nav-link-text">My Wardrobe</span>
            </a>
            <a href="ai-stylist.html" class="nav-link">
                <i class="fas fa-magic"></i><span class="nav-link-text">AI Outfits</span>
            </a>
            <a href="style-guide.html" class="nav-link">
                <i class="fas fa-chart-bar"></i><span class="nav-link-text">Analytics</span>
            </a>
            <a href="ai-cloth-changer.html" class="nav-link">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21 16-4 4-4-4"></path><path d="M17 20V4"></path><path d="m3 8 4-4 4 4"></path><path d="M7 4v16"></path></svg><span class="nav-link-text">AI Cloth Changer</span>
            </a>
        </nav>
        <div class="app-bottom">
            <button id="sidebar-toggle" class="btn-sidebar-toggle" onclick="toggleSidebar()">
                <div class="button-outer">
                    <div class="button-inner">
                        <span class="label">Collapse</span>
                        <i class="fas fa-chevron-left"></i>
                    </div>
                </div>
            </button>
        </div>
    </aside>

    <div class="app-content">
        <header class="app-topbar">
            <button class="settings-btn" id="settings-btn-main">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </button>
            <button class="logout-btn" id="logout-btn-main">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </header>

        <main class="wardrobe-content">
            <style>
                /* Wardrobe Page Styles */
                .wardrobe-container {
                    padding: 24px;
                    background: #0f0f23;
                    min-height: 100vh;
                }

                .settings-btn {
                    background: linear-gradient(135deg, #a855f7, #7c3aed);
                    color: white;
                    border: none;
                    padding: 12px 20px;
                    border-radius: 8px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    margin-right: 12px;
                }

                .settings-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 20px rgba(168, 85, 247, 0.3);
                }

                .app-topbar {
                    display: flex;
                    justify-content: flex-end;
                    align-items: center;
                    padding: 20px 32px;
                    background: rgba(255, 255, 255, 0.05);
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .wardrobe-header {
                    margin-bottom: 32px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    animation: fadeInDown 0.6s ease;
                }
                
                .wardrobe-title h1 {
                    font-size: 2.5em;
                    font-weight: 700;
                    margin-bottom: 8px;
                    background: linear-gradient(135deg, #fff, #a8edea);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                }
                
                .wardrobe-title p {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 1.1em;
                }
                
                /* Weather Widget */
                .weather-widget {
                    background: rgba(255, 255, 255, 0.08);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.15);
                    border-radius: 16px;
                    padding: 16px 20px;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    transition: all 0.3s ease;
                }
                
                .weather-widget:hover {
                    background: rgba(255, 255, 255, 0.12);
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
                }
                
                .weather-icon {
                    font-size: 2em;
                    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
                }
                
                .weather-info {
                    display: flex;
                    flex-direction: column;
                    gap: 2px;
                }
                
                .weather-temp {
                    color: #fff;
                    font-size: 1.4em;
                    font-weight: 700;
                    line-height: 1;
                }
                
                .weather-condition {
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 0.9em;
                    font-weight: 500;
                }
                
                /* Add Item Button */
                .add-item-btn {
                    position: fixed;
                    bottom: 32px;
                    right: 32px;
                    width: 64px;
                    height: 64px;
                    background: linear-gradient(135deg, #7c3aed, #06b6d4);
                    border: none;
                    border-radius: 50%;
                    color: white;
                    font-size: 28px;
                    cursor: pointer;
                    box-shadow: 0 8px 24px rgba(124, 58, 237, 0.4);
                    transition: all 0.3s;
                    z-index: 999;
                    animation: pulse 2s infinite;
                }
                
                .add-item-btn:hover {
                    transform: scale(1.1);
                    box-shadow: 0 12px 32px rgba(124, 58, 237, 0.6);
                }
                
                /* Search & Filter Bar */
                .search-filter-bar {
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.15), rgba(6, 182, 212, 0.15));
                    backdrop-filter: blur(20px);
                    padding: 24px;
                    border-radius: 20px;
                    margin-bottom: 32px;
                    border: 2px solid transparent;
                    background-clip: padding-box;
                    position: relative;
                    animation: fadeInSlide 0.8s ease;
                    box-shadow: 0 8px 32px rgba(124, 58, 237, 0.2),
                                inset 0 1px 1px rgba(255, 255, 255, 0.1);
                }
                
                .search-filter-bar::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    border-radius: 20px;
                    padding: 2px;
                    background: linear-gradient(135deg, #7c3aed, #06b6d4);
                    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                    -webkit-mask-composite: xor;
                    mask-composite: exclude;
                    opacity: 0.6;
                }
                
                .search-box {
                    display: flex;
                    gap: 16px;
                    flex-wrap: wrap;
                    margin-bottom: 16px;
                    position: relative;
                }
                
                .search-input {
                    flex: 1;
                    min-width: 250px;
                    background: rgba(255, 255, 255, 0.1);
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 14px 24px 14px 50px;
                    border-radius: 16px;
                    font-size: 1.05em;
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    position: relative;
                }
                
                .search-input:focus {
                    outline: none;
                    background: rgba(255, 255, 255, 0.15);
                    border-color: #7c3aed;
                    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2),
                                0 0 20px rgba(124, 58, 237, 0.3),
                                0 0 40px rgba(6, 182, 212, 0.2);
                    transform: translateY(-2px);
                }
                
                .search-input::placeholder {
                    color: rgba(255, 255, 255, 0.5);
                }
                
                .search-box::before {
                    content: '\f002';
                    font-family: 'Font Awesome 6 Free';
                    font-weight: 900;
                    position: absolute;
                    left: 20px;
                    top: 50%;
                    transform: translateY(-50%);
                    color: rgba(255, 255, 255, 0.6);
                    font-size: 1.2em;
                    z-index: 1;
                    animation: searchPulse 2s ease-in-out infinite;
                }
                
                @keyframes searchPulse {
                    0%, 100% { opacity: 0.6; transform: translateY(-50%) scale(1); }
                    50% { opacity: 1; transform: translateY(-50%) scale(1.1); }
                }
                
                @keyframes fadeInSlide {
                    from {
                        opacity: 0;
                        transform: translateY(-20px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                .filter-controls {
                    display: flex;
                    gap: 12px;
                    flex-wrap: wrap;
                }
                
                .filter-btn {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 10px 18px;
                    border-radius: 12px;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    position: relative;
                    overflow: hidden;
                }
                
                .filter-btn::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.3), transparent);
                    transition: left 0.5s ease;
                }
                
                .filter-btn:hover::before {
                    left: 100%;
                }
                
                .filter-btn:hover {
                    background: rgba(124, 58, 237, 0.2);
                    border-color: rgba(124, 58, 237, 0.4);
                    transform: translateY(-3px);
                    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
                }
                
                .filter-btn.active {
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.4), rgba(6, 182, 212, 0.4));
                    border-color: rgba(124, 58, 237, 0.6);
                    box-shadow: 0 4px 16px rgba(124, 58, 237, 0.4);
                    transform: translateY(-2px);
                }
                
                .color-filters {
                    display: flex;
                    gap: 8px;
                    align-items: center;
                }
                
                .color-dot {
                    width: 36px;
                    height: 36px;
                    border-radius: 50%;
                    cursor: pointer;
                    border: 3px solid transparent;
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    position: relative;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
                }
                
                .color-dot::after {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 0;
                    height: 0;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.3);
                    transition: all 0.4s ease;
                }
                
                .color-dot:hover {
                    transform: scale(1.25) rotate(10deg);
                    box-shadow: 0 4px 16px rgba(124, 58, 237, 0.5);
                }
                
                .color-dot:hover::after {
                    width: 100%;
                    height: 100%;
                }
                
                .color-dot.active {
                    border-color: #fff;
                    transform: scale(1.3);
                    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.4),
                                0 4px 20px rgba(124, 58, 237, 0.6);
                    animation: colorPulse 1s ease infinite;
                }
                
                @keyframes colorPulse {
                    0%, 100% { box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.4), 0 4px 20px rgba(124, 58, 237, 0.6); }
                    50% { box-shadow: 0 0 0 5px rgba(124, 58, 237, 0.6), 0 6px 25px rgba(124, 58, 237, 0.8); }
                }
                
                /* Wardrobe Grid */
                .wardrobe-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                    gap: 24px;
                    margin-bottom: 32px;
                }
                
                .clothing-card {
                    background: rgba(255, 255, 255, 0.04);
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.08);
                    border-radius: 20px;
                    overflow: hidden;
                    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                    animation: fadeInUp 0.6s ease;
                    position: relative;
                    cursor: pointer;
                }
                
                .clothing-card::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(6, 182, 212, 0.1));
                    opacity: 0;
                    transition: opacity 0.5s ease;
                    z-index: 0;
                    border-radius: 20px;
                }
                
                .clothing-card:hover {
                    transform: translateY(-12px) scale(1.02);
                    box-shadow: 0 25px 50px rgba(124, 58, 237, 0.3),
                                0 15px 30px rgba(6, 182, 212, 0.2),
                                0 0 0 2px rgba(124, 58, 237, 0.5);
                    border-color: rgba(124, 58, 237, 0.6);
                }
                
                .clothing-card:hover::before {
                    opacity: 1;
                }
                
                .clothing-card:active {
                    transform: translateY(-8px) scale(1.01);
                }
                
                .clothing-image {
                    width: 100%;
                    height: 280px;
                    object-fit: cover;
                    background: rgba(255, 255, 255, 0.05);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 4em;
                    position: relative;
                    overflow: hidden;
                }
                
                .clothing-image::after {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 50%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                    transition: left 0.5s ease;
                }
                
                .clothing-card:hover .clothing-image::after {
                    left: 100%;
                }
                
                .clothing-image img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .clothing-card:hover .clothing-image img {
                    transform: scale(1.1);
                }
                
                .clothing-info {
                    padding: 16px;
                    position: relative;
                    z-index: 1;
                }
                
                .clothing-name {
                    color: #fff;
                    font-weight: 600;
                    font-size: 1.1em;
                    margin-bottom: 8px;
                }
                
                .clothing-meta {
                    display: flex;
                    gap: 8px;
                    flex-wrap: wrap;
                    margin-bottom: 12px;
                }
                
                .meta-tag {
                    background: rgba(255, 255, 255, 0.15);
                    padding: 6px 14px;
                    border-radius: 14px;
                    font-size: 0.85em;
                    color: rgba(255, 255, 255, 0.9);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    transition: all 0.3s ease;
                    display: inline-flex;
                    align-items: center;
                    gap: 4px;
                }
                
                .meta-tag:hover {
                    background: rgba(124, 58, 237, 0.3);
                    border-color: rgba(124, 58, 237, 0.5);
                    transform: translateY(-2px);
                }
                
                .card-actions {
                    display: flex;
                    gap: 8px;
                    justify-content: space-between;
                }
                
                .action-btn {
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    padding: 10px 16px;
                    border-radius: 10px;
                    cursor: pointer;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    flex: 1;
                    position: relative;
                    overflow: hidden;
                    z-index: 1;
                }
                
                .action-btn::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    width: 0;
                    height: 0;
                    background: rgba(124, 58, 237, 0.4);
                    border-radius: 50%;
                    transform: translate(-50%, -50%);
                    transition: width 0.4s ease, height 0.4s ease;
                    z-index: -1;
                }
                
                .action-btn:hover::before {
                    width: 300px;
                    height: 300px;
                }
                
                .action-btn:hover {
                    background: rgba(124, 58, 237, 0.3);
                    border-color: rgba(124, 58, 237, 0.5);
                    transform: translateY(-2px);
                    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
                }
                
                .action-btn:active {
                    transform: translateY(0);
                }
                
                .favorite-btn {
                    position: absolute;
                    top: 12px;
                    right: 12px;
                    background: rgba(0, 0, 0, 0.6);
                    backdrop-filter: blur(10px);
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    color: #fff;
                    width: 44px;
                    height: 44px;
                    border-radius: 50%;
                    cursor: pointer;
                    font-size: 1.3em;
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    z-index: 2;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .favorite-btn:hover {
                    transform: scale(1.15) rotate(15deg);
                    background: rgba(251, 191, 36, 0.2);
                    border-color: #fbbf24;
                    color: #fbbf24;
                    box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
                }
                
                .favorite-btn.active {
                    color: #fbbf24;
                    background: rgba(251, 191, 36, 0.2);
                    border-color: #fbbf24;
                    animation: heartBeat 0.5s ease;
                }
                
                @keyframes heartBeat {
                    0%, 100% { transform: scale(1); }
                    25% { transform: scale(1.3); }
                    50% { transform: scale(1.1); }
                    75% { transform: scale(1.25); }
                }
                
                /* Modal Styles */
                .modal {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.7);
                    backdrop-filter: blur(5px);
                    z-index: 2000;
                    justify-content: center;
                    align-items: center;
                    animation: fadeIn 0.3s ease;
                }
                
                .modal.active {
                    display: flex;
                }
                
                .modal-content {
                    background: rgba(255, 255, 255, 0.08);
                    backdrop-filter: blur(30px) saturate(180%);
                    -webkit-backdrop-filter: blur(30px) saturate(180%);
                    border: 2px solid rgba(255, 255, 255, 0.18);
                    border-radius: 28px;
                    padding: 40px;
                    max-width: 650px;
                    width: 90%;
                    max-height: 90vh;
                    overflow-y: auto;
                    animation: slideUp 0.4s ease;
                    box-shadow: 0 30px 90px rgba(0, 0, 0, 0.7), 
                                0 0 60px rgba(124, 58, 237, 0.3),
                                inset 0 1px 1px rgba(255, 255, 255, 0.15);
                }
                
                .modal-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 24px;
                }
                
                .modal-header h2 {
                    color: #fff;
                    font-size: 2em;
                    background: linear-gradient(135deg, #fff, #a8edea, #fed6e3);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    font-weight: 700;
                }
                
                .close-btn {
                    background: rgba(255, 255, 255, 0.2);
                    border: none;
                    color: #fff;
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    cursor: pointer;
                    font-size: 1.5em;
                    transition: all 0.3s;
                }
                
                .close-btn:hover {
                    background: rgba(255, 255, 255, 0.3);
                    transform: rotate(90deg);
                }
                
                .form-group {
                    margin-bottom: 20px;
                }

                .occasion-checkboxes {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                    gap: 12px;
                    margin-top: 8px;
                }

                .checkbox-item {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    padding: 8px 12px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    transition: all 0.3s ease;
                }

                .checkbox-item:hover {
                    background: rgba(255, 255, 255, 0.1);
                    border-color: rgba(168, 85, 247, 0.3);
                }

                .checkbox-item input[type="checkbox"] {
                    width: 16px;
                    height: 16px;
                    accent-color: #a855f7;
                    cursor: pointer;
                }

                .checkbox-item label {
                    color: rgba(255, 255, 255, 0.9);
                    font-size: 14px;
                    cursor: pointer;
                    margin: 0;
                    flex: 1;
                }

                .checkbox-item input[type="checkbox"]:checked + label {
                    color: #a855f7;
                    font-weight: 600;
                }

                .checkbox-item input[type="checkbox"]:checked {
                    background: #a855f7;
                }

                .quick-color-picker {
                    display: flex;
                    gap: 8px;
                    flex-wrap: wrap;
                    margin-top: 8px;
                }

                .quick-color-option {
                    width: 32px;
                    height: 32px;
                    border-radius: 50%;
                    cursor: pointer;
                    border: 2px solid transparent;
                    transition: all 0.3s ease;
                    position: relative;
                }

                .quick-color-option:hover {
                    transform: scale(1.1);
                    border-color: rgba(255, 255, 255, 0.5);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                }

                .quick-color-option.selected {
                    border-color: #a855f7;
                    box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3);
                    transform: scale(1.1);
                }

                .quick-color-option.selected::after {
                    content: '‚úì';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    color: white;
                    font-size: 12px;
                    font-weight: bold;
                    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
                }

                .quick-color-option.custom-color {
                    background: linear-gradient(45deg, #a855f7, #ec4899, #f97316, #10b981, #3b82f6);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 14px;
                }

                .quick-color-option.custom-color:hover {
                    transform: scale(1.1);
                    box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
                }

                .quick-color-option.custom-color.selected {
                    border-color: #a855f7;
                    box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3);
                }

                .custom-color-section {
                    background: rgba(255, 255, 255, 0.05);
                    padding: 12px;
                    border-radius: 8px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .form-group label {
                    display: block;
                    color: #fff;
                    margin-bottom: 8px;
                    font-weight: 500;
                }
                
                .form-input, .form-select {
                    width: 100%;
                    background: rgba(255, 255, 255, 0.1);
                    border: 2px solid rgba(124, 58, 237, 0.3);
                    color: #fff;
                    padding: 14px 16px;
                    border-radius: 12px;
                    font-size: 1em;
                    transition: all 0.3s;
                }
                
                .form-input:focus, .form-select:focus {
                    outline: none;
                    border-color: rgba(124, 58, 237, 0.8);
                    background: rgba(255, 255, 255, 0.15);
                    box-shadow: 0 0 20px rgba(124, 58, 237, 0.3);
                }
                
                .form-input::placeholder {
                    color: rgba(255, 255, 255, 0.6);
                }
                
                
                .image-upload {
                    border: 3px dashed rgba(124, 58, 237, 0.6);
                    border-radius: 16px;
                    padding: 40px;
                    text-align: center;
                    cursor: pointer;
                    transition: all 0.3s;
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.05), rgba(6, 182, 212, 0.05));
                    position: relative;
                    overflow: hidden;
                }
                
                .image-upload::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                    transition: left 0.5s;
                }
                
                .image-upload:hover::before {
                    left: 100%;
                }
                
                .image-upload:hover {
                    border-color: rgba(124, 58, 237, 1);
                    background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(6, 182, 212, 0.1));
                    transform: scale(1.02);
                }
                
                .image-preview {
                    max-width: 100%;
                    max-height: 200px;
                    margin-top: 12px;
                    border-radius: 8px;
                }
                
                .submit-btn {
                    width: 100%;
                    background: linear-gradient(135deg, #7c3aed, #06b6d4);
                    border: none;
                    color: #fff;
                    padding: 16px;
                    border-radius: 12px;
                    font-size: 1.1em;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s;
                }
                
                .submit-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 24px rgba(124, 58, 237, 0.4);
                }
                
                
                /* Empty State */
                .empty-state {
                    text-align: center;
                    padding: 100px 20px;
                    color: rgba(255, 255, 255, 0.8);
                    animation: fadeIn 1s ease;
                }
                
                .empty-state-icon {
                    font-size: 8em;
                    margin-bottom: 30px;
                    display: inline-block;
                    position: relative;
                    animation: floatGlow 3s ease-in-out infinite;
                    filter: drop-shadow(0 0 20px rgba(124, 58, 237, 0.6))
                            drop-shadow(0 0 40px rgba(6, 182, 212, 0.4));
                }
                
                .empty-state-icon::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 150%;
                    height: 150%;
                    background: radial-gradient(circle, rgba(124, 58, 237, 0.3), transparent 70%);
                    border-radius: 50%;
                    animation: pulse 2s ease-in-out infinite;
                }
                
                .empty-state h2 {
                    font-size: 2em;
                    margin-bottom: 16px;
                    background: linear-gradient(135deg, #7c3aed, #06b6d4);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    animation: fadeInUp 1s ease 0.3s backwards;
                }
                
                .empty-state p {
                    font-size: 1.2em;
                    color: rgba(255, 255, 255, 0.7);
                    animation: fadeInUp 1s ease 0.5s backwards;
                }
                
                @keyframes floatGlow {
                    0%, 100% {
                        transform: translateY(0) rotate(0deg);
                        filter: drop-shadow(0 0 20px rgba(124, 58, 237, 0.6))
                                drop-shadow(0 0 40px rgba(6, 182, 212, 0.4));
                    }
                    25% {
                        transform: translateY(-15px) rotate(-5deg);
                        filter: drop-shadow(0 0 30px rgba(124, 58, 237, 0.8))
                                drop-shadow(0 0 50px rgba(6, 182, 212, 0.6));
                    }
                    50% {
                        transform: translateY(-20px) rotate(0deg);
                        filter: drop-shadow(0 0 40px rgba(6, 182, 212, 0.8))
                                drop-shadow(0 0 60px rgba(124, 58, 237, 0.6));
                    }
                    75% {
                        transform: translateY(-15px) rotate(5deg);
                        filter: drop-shadow(0 0 30px rgba(124, 58, 237, 0.8))
                                drop-shadow(0 0 50px rgba(6, 182, 212, 0.6));
                    }
                }
                
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                /* Animations */
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                @keyframes fadeInDown {
                    from { opacity: 0; transform: translateY(-20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                @keyframes slideInRight {
                    from { transform: translateX(400px); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                
                @keyframes slideUp {
                    from { transform: translateY(50px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                
                @keyframes pulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.1); }
                }
                
                @keyframes bounce {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-20px); }
                }
                
                /* Toast Notification - Enhanced */
                .toast {
                    position: fixed;
                    top: 80px;
                    right: 24px;
                    background: linear-gradient(135deg, rgba(16, 185, 129, 0.95), rgba(59, 130, 246, 0.95));
                    backdrop-filter: blur(20px);
                    color: white;
                    padding: 24px;
                    border-radius: 20px;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(59, 130, 246, 0.4);
                    z-index: 3000;
                    animation: slideInRight 0.5s ease;
                    display: none;
                    max-width: 420px;
                    min-width: 380px;
                    border: 2px solid rgba(255, 255, 255, 0.3);
                }
                
                .toast.show {
                    display: block;
                }
                
                .toast-image {
                    width: 100%;
                    height: 200px;
                    border-radius: 16px;
                    object-fit: cover;
                    background: rgba(255, 255, 255, 0.15);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 5em;
                    margin-bottom: 16px;
                    border: 2px solid rgba(255, 255, 255, 0.2);
                    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
                }
                
                .toast-image img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    border-radius: 14px;
                }
                
                .toast-content {
                    text-align: center;
                }
                
                .toast-title {
                    font-weight: 700;
                    font-size: 1.6em;
                    margin-bottom: 16px;
                    margin-top: 8px;
                    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
                    line-height: 1.3;
                }
                
                .toast-details {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 10px;
                    margin-bottom: 20px;
                    padding-bottom: 20px;
                    border-bottom: 2px solid rgba(255, 255, 255, 0.2);
                }
                
                .toast-message {
                    font-size: 0.95em;
                    font-weight: 700;
                    padding: 14px 24px;
                    border-radius: 12px;
                    text-transform: uppercase;
                    letter-spacing: 1.5px;
                    margin-top: auto;
                }
                
                .toast-message.success {
                    background: rgba(16, 185, 129, 0.5);
                    border: 2px solid rgba(16, 185, 129, 1);
                    color: #fff;
                    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
                }
                
                .toast-message.deleted {
                    background: rgba(239, 68, 68, 0.5);
                    border: 2px solid rgba(239, 68, 68, 1);
                    color: #fff;
                    box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
                }
                
                .toast-tag {
                    background: rgba(255, 255, 255, 0.25);
                    backdrop-filter: blur(10px);
                    padding: 10px 16px;
                    border-radius: 12px;
                    font-size: 0.9em;
                    font-weight: 600;
                    border: 1px solid rgba(255, 255, 255, 0.4);
                    text-transform: capitalize;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    justify-content: center;
                    white-space: nowrap;
                }
                
                /* Responsive */
                @media (max-width: 768px) {
                    .wardrobe-grid {
                        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                    }
                    .wardrobe-header {
                        flex-direction: column;
                        align-items: flex-start;
                        gap: 16px;
                    }
                    
                    .weather-widget {
                        align-self: stretch;
                        justify-content: center;
                    }
                    .toast {
                        right: 12px;
                        left: 12px;
                        max-width: calc(100% - 24px);
                        min-width: auto;
                    }
                }
            </style>

            <div class="wardrobe-container">
                <!-- Header -->
            <div class="wardrobe-header">
                    <div class="wardrobe-title">
                        <h1><i class="fas fa-tshirt"></i> My Wardrobe</h1>
                        <p>Manage your clothing collection and build your digital closet</p>
                    </div>
                    
                    <!-- Weather Widget -->
                    <div class="weather-widget">
                        <div class="weather-icon" id="weatherIcon">‚òÄÔ∏è</div>
                        <div class="weather-info">
                            <div class="weather-temp" id="weatherTemp">24¬∞C</div>
                            <div class="weather-condition" id="weatherCondition">Clear</div>
                        </div>
                    </div>
                </div>

                <!-- Search & Filter Bar -->
                <div class="search-filter-bar">
                    <div class="search-box">
                        <input type="text" class="search-input" id="searchInput" placeholder="üîç Search by name, category, or color...">
                    </div>
                    <div class="filter-controls">
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-th"></i> All Items
                        </button>
                        <button class="filter-btn" data-filter="topwear">
                            <i class="fas fa-tshirt"></i> Topwear
                        </button>
                        <button class="filter-btn" data-filter="bottomwear">
                            <i class="fas fa-socks"></i> Bottomwear
                        </button>
                        <button class="filter-btn" data-filter="footwear">
                            <i class="fas fa-shoe-prints"></i> Footwear
                        </button>
                        <button class="filter-btn" data-filter="accessories">
                            <i class="fas fa-glasses"></i> Accessories
                        </button>
                        <div class="color-filters">
                            <span style="color: #fff; margin-right: 8px;">Colors:</span>
                            <div class="color-dot" data-color="black" style="background: #000;"></div>
                            <div class="color-dot" data-color="blue" style="background: #3b82f6;"></div>
                            <div class="color-dot" data-color="red" style="background: #ef4444;"></div>
                            <div class="color-dot" data-color="white" style="background: #fff;"></div>
                            <div class="color-dot" data-color="green" style="background: #10b981;"></div>
                        </div>
                    </div>
                </div>

                <!-- Wardrobe Grid -->
                <div class="wardrobe-grid" id="wardrobeGrid">
                    <!-- Items will be dynamically added here -->
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-state-icon">üëï</div>
                    <h2>No Clothes Added Yet</h2>
                    <p>Start building your digital wardrobe by clicking the + button</p>
                </div>

                <!-- Add Item Button -->
                <button class="add-item-btn" id="addItemBtn" title="Add New Item">
                    <i class="fas fa-plus"></i>
                </button>

            </div>
            
            <!-- Add/Edit Item Modal -->
            <div class="modal" id="itemModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="modalTitle">Add New Item</h2>
                        <button class="close-btn" id="closeModal">&times;</button>
            </div>
                    <form id="itemForm">
                        <input type="hidden" id="itemId">
            
                            <div class="form-group">
                            <label>Upload Image</label>
                            <div class="image-upload" id="imageUpload">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 3em; color: rgba(255,255,255,0.6);"></i>
                                <p style="color: rgba(255,255,255,0.8); margin-top: 12px;">Click or drag to upload image</p>
                                <input type="file" id="imageInput" accept="image/*" style="display: none;">
                                <img id="imagePreview" class="image-preview" style="display: none; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Or Paste Image URL</label>
                            <input type="url" class="form-input" id="imageUrl" placeholder="https://example.com/image.jpg">
                            <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.85em; margin-top: 8px; line-height: 1.4;">
                                <i class="fas fa-info-circle"></i> Paste any image URL from the web and it will be added to your wardrobe!
                            </p>
                        </div>

                        <!-- Quick Color Selector -->
                        <div class="form-group">
                            <label>Color Selection *</label>
                            <div class="quick-color-picker">
                                <div class="quick-color-option" data-color="black" style="background: #000;" title="Black"></div>
                                <div class="quick-color-option" data-color="white" style="background: #fff; border: 1px solid #666;" title="White"></div>
                                <div class="quick-color-option" data-color="gray" style="background: #6b7280;" title="Gray"></div>
                                <div class="quick-color-option" data-color="blue" style="background: #3b82f6;" title="Blue"></div>
                                <div class="quick-color-option" data-color="red" style="background: #ef4444;" title="Red"></div>
                                <div class="quick-color-option" data-color="green" style="background: #10b981;" title="Green"></div>
                                <div class="quick-color-option" data-color="brown" style="background: #92400e;" title="Brown"></div>
                                <div class="quick-color-option" data-color="pink" style="background: #ec4899;" title="Pink"></div>
                                <div class="quick-color-option custom-color" id="customColorOption" title="Custom Color">
                                    <i class="fas fa-palette"></i>
                                </div>
                            </div>
                            <div class="custom-color-section" id="customColorSection" style="display: none; margin-top: 12px;">
                                <div style="display: flex; gap: 12px; align-items: center;">
                                    <label style="margin: 0; flex-shrink: 0; color: rgba(255, 255, 255, 0.9);">Custom Color:</label>
                                    <input type="color" id="customColorPicker" class="form-input" style="width: 60px; height: 40px; cursor: pointer; padding: 4px;">
                                    <input type="text" id="colorName" class="form-input" placeholder="Color name (e.g., 'burgundy')" style="flex: 1;">
                                </div>
                            </div>
                            <input type="hidden" id="selectedColor" required>
                        </div>

                            <div class="form-group">
                            <label>Item Name *</label>
                            <input type="text" class="form-input" id="itemName" placeholder="E.g., Blue Denim Jacket" required>
                    </div>

                            <div class="form-group">
                            <label>Category *</label>
                            <select class="form-select" id="itemCategory" required>
                                <option value="">Select Category</option>
                                <option value="topwear">Topwear</option>
                                <option value="bottomwear">Bottomwear</option>
                                <option value="footwear">Footwear</option>
                                <option value="accessories">Accessories</option>
                                </select>
                        </div>

                        <div class="form-group">
                            <label>Season</label>
                            <select class="form-select" id="itemSeason">
                                <option value="all-season">All Season</option>
                                <option value="summer">Summer</option>
                                <option value="winter">Winter</option>
                                <option value="monsoon">Monsoon</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Occasion (Select Multiple)</label>
                            <div class="occasion-checkboxes">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-casual" value="casual">
                                    <label for="occasion-casual">Casual</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-formal" value="formal">
                                    <label for="occasion-formal">Formal</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-business" value="business">
                                    <label for="occasion-business">Business</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-party" value="party">
                                    <label for="occasion-party">Party</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-sports" value="sports">
                                    <label for="occasion-sports">Sports</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-workout" value="workout">
                                    <label for="occasion-workout">Workout</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-date" value="date">
                                    <label for="occasion-date">Date Night</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-travel" value="travel">
                                    <label for="occasion-travel">Travel</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="occasion-home" value="home">
                                    <label for="occasion-home">Home</label>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="submit-btn">
                            <i class="fas fa-save"></i> Save Item
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Item Details Modal -->
            <div class="modal" id="detailsModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Item Details</h2>
                        <button class="close-btn" id="closeDetailsModal">&times;</button>
                    </div>
                    <div id="itemDetails"></div>
                </div>
            </div>
            
            <!-- Toast Notification -->
            <div class="toast" id="toast"></div>

            <script>
                // Wardrobe Data Management
                let wardrobeItems = userDB.loadUserData('wardrobeItems', []);
                
                // If no items found, load default wardrobe items
                if (wardrobeItems.length === 0) {
                    wardrobeItems = [
                        {
                            id: 1,
                            name: 'yellow full sleve t-shirt',
                            category: 'topwear',
                            color: '#d5af01',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/yellow_tshirt.jpg'
                        },
                        {
                            id: 2,
                            name: 'black t-shirt',
                            category: 'topwear',
                            color: 'black',
                            season: 'summer',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/black_tshirt.jpg'
                        },
                        {
                            id: 3,
                            name: 'strip line full sleve t-shirt',
                            category: 'topwear',
                            color: '#546056',
                            season: 'winter',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/strip_tshirt.jpg'
                        },
                        {
                            id: 4,
                            name: 'checked black and red shirt',
                            category: 'topwear',
                            color: 'red',
                            season: 'all-season',
                            occasion: ['casual', 'formal'],
                            favorite: false,
                            emoji: 'üëî',
                            image: 'assets/uploads/checked_shirt.jpg'
                        },
                        {
                            id: 5,
                            name: 'blackish white jeans',
                            category: 'bottomwear',
                            color: 'white',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/blackish_white_jeans.jpg'
                        },
                        {
                            id: 6,
                            name: 'navy blue jeans',
                            category: 'bottomwear',
                            color: '#2a3e61',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/navy_jeans.jpg'
                        },
                        {
                            id: 7,
                            name: 'polo t-shirt',
                            category: 'topwear',
                            color: '#b7a092',
                            season: 'summer',
                            occasion: ['casual', 'sport'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/polo_tshirt.jpg'
                        },
                        {
                            id: 8,
                            name: 'red hoddie',
                            category: 'topwear',
                            color: 'red',
                            season: 'winter',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üß•',
                            image: 'assets/uploads/red_hoodie.jpg'
                        },
                        {
                            id: 9,
                            name: 'striped full sleve t-shirt',
                            category: 'topwear',
                            color: '#7a6337',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/striped_tshirt.jpg'
                        },
                        {
                            id: 10,
                            name: 'white full sleve t-shirt',
                            category: 'topwear',
                            color: 'white',
                            season: 'winter',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/white_tshirt.jpg'
                        },
                        {
                            id: 11,
                            name: 'printed shirt',
                            category: 'topwear',
                            color: '#917759',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëî',
                            image: 'assets/uploads/printed_shirt.jpg'
                        },
                        {
                            id: 12,
                            name: 'light blue shirt',
                            category: 'topwear',
                            color: 'blue',
                            season: 'all-season',
                            occasion: ['casual', 'formal'],
                            favorite: false,
                            emoji: 'üëî',
                            image: 'assets/uploads/light_blue_shirt.jpg'
                        },
                        {
                            id: 13,
                            name: 'half sleve check shirt',
                            category: 'topwear',
                            color: '#817f80',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëî',
                            image: 'assets/uploads/check_shirt.jpg'
                        },
                        {
                            id: 14,
                            name: 'macroon shirt',
                            category: 'topwear',
                            color: '#580c20',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëî',
                            image: 'assets/uploads/maroon_shirt.jpg'
                        },
                        {
                            id: 15,
                            name: 'check pattern pant',
                            category: 'bottomwear',
                            color: 'white',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/check_pant.jpg'
                        },
                        {
                            id: 16,
                            name: 'black trackpant',
                            category: 'bottomwear',
                            color: 'black',
                            season: 'winter',
                            occasion: ['casual', 'sport'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/black_trackpant.jpg'
                        },
                        {
                            id: 17,
                            name: 'bottle green cargo',
                            category: 'bottomwear',
                            color: '#0e3538',
                            season: 'summer',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/green_cargo.jpg'
                        },
                        {
                            id: 18,
                            name: 'light blue baggy jeans',
                            category: 'bottomwear',
                            color: '#0e3538',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/light_blue_jeans.jpg'
                        },
                        {
                            id: 19,
                            name: 'white kurta',
                            category: 'topwear',
                            color: 'white',
                            season: 'summer',
                            occasion: ['casual', 'traditional'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/white_kurta.jpg'
                        },
                        {
                            id: 20,
                            name: 'black jeans',
                            category: 'bottomwear',
                            color: 'black',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/black_jeans.jpg'
                        },
                        {
                            id: 21,
                            name: 'light green full sleve t-shirt',
                            category: 'topwear',
                            color: '#60a4a3',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëï',
                            image: 'assets/uploads/light_green_tshirt.jpg'
                        },
                        {
                            id: 22,
                            name: 'white pant',
                            category: 'bottomwear',
                            color: 'white',
                            season: 'all-season',
                            occasion: ['casual', 'formal'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/white_pant.jpg'
                        },
                        {
                            id: 23,
                            name: 'white pajamas',
                            category: 'bottomwear',
                            color: 'white',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëñ',
                            image: 'assets/uploads/white_pajamas.jpg'
                        },
                        {
                            id: 24,
                            name: 'chelsea boots',
                            category: 'footwear',
                            color: 'black',
                            season: 'all-season',
                            occasion: ['casual', 'formal'],
                            favorite: false,
                            emoji: 'üë¢',
                            image: 'assets/uploads/chelsea_boots.jpg'
                        },
                        {
                            id: 25,
                            name: 'navy blue comfortable shoe',
                            category: 'footwear',
                            color: 'blue',
                            season: 'summer',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëü',
                            image: 'assets/uploads/navy_shoes.jpg'
                        },
                        {
                            id: 26,
                            name: 'canvas',
                            category: 'footwear',
                            color: 'black',
                            season: 'all-season',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üëü',
                            image: 'assets/uploads/canvas_shoes.jpg'
                        },
                        {
                            id: 27,
                            name: 'blue jordan',
                            category: 'footwear',
                            color: 'blue',
                            season: 'all-season',
                            occasion: ['casual', 'sport'],
                            favorite: false,
                            emoji: 'üëü',
                            image: 'assets/uploads/blue_jordan.jpg'
                        },
                        {
                            id: 28,
                            name: 'sandal',
                            category: 'footwear',
                            color: 'blue',
                            season: 'monsoon',
                            occasion: ['casual'],
                            favorite: false,
                            emoji: 'üë°',
                            image: 'assets/uploads/sandal.jpg'
                        }
                    ];
                    
                    // Save the default wardrobe items
                    userDB.saveUserData('wardrobeItems', wardrobeItems);
                    console.log('‚úÖ Loaded default wardrobe items:', wardrobeItems.length);
                }
                let currentFilter = 'all';
                let currentColorFilter = null;
                let editingItemId = null;
                
                // Weather Data
                let currentWeather = { temp: 24, condition: 'Clear' };

                // Initialize
                document.addEventListener('DOMContentLoaded', function() {
                    renderWardrobe();
                    setupEventListeners();
                    initializeWeather();
                    
                    // Logout functionality
                    document.getElementById('logout-btn-main').addEventListener('click', function() {
                        if (confirm('Are you sure you want to logout?')) {
                            // Use userDB logout method
                            userDB.logoutUser();
                            // Clear session storage
                            sessionStorage.clear();
                            // Clear any other auth flags
                            localStorage.removeItem('isLoggedIn');
                            // Redirect to login page
                            window.location.href = 'landing.html';
                        }
                    });

                    // Settings button functionality
                    document.getElementById('settings-btn-main').addEventListener('click', function() {
                        window.location.href = 'settings.html';
                    });
                });
                
                // Weather Functions
                function initializeWeather() {
                    // Use mock weather data (same as AI outfit page)
                    currentWeather = { temp: 24, condition: 'Clear' };
                    updateWeatherDisplay();
                    
                    // Simulate weather changes every 30 seconds for demo
                    setInterval(() => {
                        if (Math.random() > 0.7) {
                            changeWeather();
                        }
                    }, 30000);
                }
                
                function changeWeather() {
                    const weatherOptions = [
                        { temp: 28, condition: 'Sunny' },
                        { temp: 22, condition: 'Cloudy' },
                        { temp: 18, condition: 'Rainy' },
                        { temp: 15, condition: 'Cold' },
                        { temp: 26, condition: 'Clear' },
                        { temp: 20, condition: 'Windy' }
                    ];
                    
                    const newWeather = weatherOptions[Math.floor(Math.random() * weatherOptions.length)];
                    currentWeather = newWeather;
                    updateWeatherDisplay();
                }
                
                function updateWeatherDisplay() {
                    const weatherIcon = document.getElementById('weatherIcon');
                    const weatherTemp = document.getElementById('weatherTemp');
                    const weatherCondition = document.getElementById('weatherCondition');
                    
                    if (weatherIcon && weatherTemp && weatherCondition) {
                        weatherTemp.textContent = `${currentWeather.temp}¬∞C`;
                        weatherCondition.textContent = currentWeather.condition;
                        
                        // Update weather icon based on condition
                        const icons = {
                            'Sunny': '‚òÄÔ∏è',
                            'Clear': '‚òÄÔ∏è',
                            'Cloudy': '‚òÅÔ∏è',
                            'Rainy': 'üåßÔ∏è',
                            'Cold': '‚ùÑÔ∏è',
                            'Windy': 'üí®'
                        };
                        
                        weatherIcon.textContent = icons[currentWeather.condition] || '‚òÄÔ∏è';
                    }
                }

                // Setup Event Listeners
                function setupEventListeners() {
                    document.getElementById('addItemBtn').addEventListener('click', openAddModal);
                    document.getElementById('closeModal').addEventListener('click', closeModal);
                    document.getElementById('closeDetailsModal').addEventListener('click', () => {
                        document.getElementById('detailsModal').classList.remove('active');
                    });
                    document.getElementById('itemForm').addEventListener('submit', saveItem);
                    document.getElementById('searchInput').addEventListener('input', handleSearch);
                    
                    // Filter buttons
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                            this.classList.add('active');
                            currentFilter = this.dataset.filter;
                            renderWardrobe();
                        });
                    });
                    
                    // Color filters
                    document.querySelectorAll('.color-filters .color-dot').forEach(dot => {
                        dot.addEventListener('click', function() {
                            document.querySelectorAll('.color-filters .color-dot').forEach(d => d.classList.remove('active'));
                            if (currentColorFilter === this.dataset.color) {
                                currentColorFilter = null;
                            } else {
                                this.classList.add('active');
                                currentColorFilter = this.dataset.color;
                            }
                            renderWardrobe();
                        });
                    });

                    // Quick color picker
                    document.querySelectorAll('.quick-color-option').forEach(option => {
                        option.addEventListener('click', function() {
                            // Remove selection from all quick color options
                            document.querySelectorAll('.quick-color-option').forEach(o => o.classList.remove('selected'));
                            // Add selection to clicked option
                            this.classList.add('selected');
                            
                            // Handle custom color option
                            if (this.id === 'customColorOption') {
                                document.getElementById('customColorSection').style.display = 'block';
                                document.getElementById('selectedColor').value = '';
                            } else {
                                document.getElementById('customColorSection').style.display = 'none';
                                document.getElementById('selectedColor').value = this.dataset.color;
                            }
                        });
                    });
                    
                    // Image upload
                    document.getElementById('imageUpload').addEventListener('click', () => {
                        document.getElementById('imageInput').click();
                    });
                    
                    document.getElementById('imageInput').addEventListener('change', function(e) {
                        const files = e.target.files;
                        
                        // Validation: Only allow one image at a time
                        if (files.length > 1) {
                            showToast('‚ö†Ô∏è Please select only ONE image at a time');
                            e.target.value = ''; // Clear the input
                            return;
                        }
                        
                        const file = files[0];
                        if (file) {
                            // Check if it's an image
                            if (!file.type.startsWith('image/')) {
                                showToast('‚ùå Please select a valid image file');
                                e.target.value = '';
                                return;
                            }
                            
                            // Check file size (max 5MB)
                            if (file.size > 5 * 1024 * 1024) {
                                showToast('‚ùå Image size should be less than 5MB');
                                e.target.value = '';
                                return;
                            }
                            
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                document.getElementById('imagePreview').src = e.target.result;
                                document.getElementById('imagePreview').style.display = 'block';
                                document.getElementById('imageUrl').value = ''; // Clear URL input
                                showToast('‚úÖ Image uploaded successfully!');
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                    
                    // Image URL input handler
                    document.getElementById('imageUrl').addEventListener('input', function(e) {
                        const url = e.target.value.trim();
                        if (url) {
                            // Test if the URL is valid and points to an image
                            const img = new Image();
                            img.onload = function() {
                                document.getElementById('imagePreview').src = url;
                                document.getElementById('imagePreview').style.display = 'block';
                                document.getElementById('imageInput').value = ''; // Clear file input
                                showToast('‚úÖ Image loaded from URL!');
                            };
                            img.onerror = function() {
                                showToast('‚ùå Invalid image URL. Please check the link.');
                            };
                            img.src = url;
                        }
                    });
                    
                    // Custom color picker
                    document.getElementById('customColorPicker').addEventListener('input', function() {
                        const colorValue = this.value;
                        const colorName = document.getElementById('colorName').value || colorValue;
                        document.getElementById('selectedColor').value = colorName;
                    });
                    
                    document.getElementById('colorName').addEventListener('input', function() {
                        if (this.value) {
                            document.getElementById('selectedColor').value = this.value;
                        }
                    });
                }

                // Render Wardrobe
                function renderWardrobe() {
                    const grid = document.getElementById('wardrobeGrid');
                    const emptyState = document.getElementById('emptyState');
                    
                    let filteredItems = wardrobeItems.filter(item => {
                        if (currentFilter !== 'all' && item.category !== currentFilter) return false;
                        if (currentColorFilter && item.color !== currentColorFilter) return false;
                        return true;
                    });
                    
                    if (filteredItems.length === 0) {
                        grid.innerHTML = '';
                        emptyState.style.display = 'block';
                        return;
                    }
                    
                    emptyState.style.display = 'none';
                    grid.innerHTML = filteredItems.map(item => `
                        <div class="clothing-card" data-id="${item.id}">
                            <button class="favorite-btn ${item.favorite ? 'active' : ''}" onclick="toggleFavorite(${item.id})">
                                <i class="fas fa-star"></i>
                            </button>
                            <div class="clothing-image" onclick="viewDetails(${item.id})">
                                ${item.image ? `<img src="${item.image}" alt="${item.name}">` : (item.emoji || 'üëï')}
                            </div>
                            <div class="clothing-info">
                                <div class="clothing-name">${item.name}</div>
                                <div class="clothing-meta">
                                    <span class="meta-tag">${item.category}</span>
                                    <span class="meta-tag">${item.color}</span>
                                    <span class="meta-tag">${item.season}</span>
                    </div>
                                <div class="card-actions">
                                    <button class="action-btn" onclick="editItem(${item.id})">
                                        <i class="fas fa-edit"></i> Edit
                                    </button>
                                    <button class="action-btn" onclick="deleteItem(${item.id})">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                    </div>
                    </div>
                </div>
                    `).join('');
                }

                // Search Handler
                function handleSearch(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const cards = document.querySelectorAll('.clothing-card');
                    
                    cards.forEach(card => {
                        const text = card.textContent.toLowerCase();
                        card.style.display = text.includes(searchTerm) ? 'block' : 'none';
                    });
                }

                // Open Add Modal
                function openAddModal() {
                    editingItemId = null;
                    document.getElementById('modalTitle').textContent = 'Add New Item';
                    document.getElementById('itemForm').reset();
                    document.getElementById('imagePreview').style.display = 'none';
                    document.querySelectorAll('.quick-color-option').forEach(o => o.classList.remove('selected'));
                    document.getElementById('customColorSection').style.display = 'none';
                    document.getElementById('itemModal').classList.add('active');
                }

                // Close Modal
                function closeModal() {
                    document.getElementById('itemModal').classList.remove('active');
                    document.getElementById('imageUrl').value = ''; // Clear URL input
                }

                // Save Item
                function saveItem(e) {
                    e.preventDefault();
                    
                    // Get image if uploaded
                    const imagePreview = document.getElementById('imagePreview');
                    const imageData = imagePreview.style.display !== 'none' ? imagePreview.src : null;
                    
                    // Get selected occasions
                    const selectedOccasions = [];
                    document.querySelectorAll('.occasion-checkboxes input[type="checkbox"]:checked').forEach(checkbox => {
                        selectedOccasions.push(checkbox.value);
                    });

                    const item = {
                        id: editingItemId || Date.now(),
                        name: document.getElementById('itemName').value,
                        category: document.getElementById('itemCategory').value,
                        color: document.getElementById('selectedColor').value,
                        season: document.getElementById('itemSeason').value,
                        occasion: selectedOccasions.length > 0 ? selectedOccasions : ['casual'], // Default to casual if none selected
                        favorite: editingItemId ? wardrobeItems.find(i => i.id === editingItemId)?.favorite || false : false,
                        emoji: getCategoryEmoji(document.getElementById('itemCategory').value),
                        image: imageData  // Save base64 image
                    };
                    
                    if (editingItemId) {
                        const index = wardrobeItems.findIndex(i => i.id === editingItemId);
                        wardrobeItems[index] = { ...wardrobeItems[index], ...item };
                        showToast('Item updated successfully!', item);
                    } else {
                        wardrobeItems.push(item);
                        showToast('Item added successfully!', item);
                    }
                    
                    saveToLocalStorage();
                    renderWardrobe();
                    closeModal();
                }

                // Edit Item
                function editItem(id) {
                    const item = wardrobeItems.find(i => i.id === id);
                    if (!item) return;
                    
                    editingItemId = id;
                    document.getElementById('modalTitle').textContent = 'Edit Item';
                    document.getElementById('itemName').value = item.name;
                    document.getElementById('itemCategory').value = item.category;
                    document.getElementById('itemSeason').value = item.season;
                    document.getElementById('selectedColor').value = item.color;
                    
                    // Handle occasions (can be string or array)
                    const occasions = Array.isArray(item.occasion) ? item.occasion : [item.occasion];
                    document.querySelectorAll('.occasion-checkboxes input[type="checkbox"]').forEach(checkbox => {
                        checkbox.checked = occasions.includes(checkbox.value);
                    });
                    
                    // Show existing image if available
                    const imagePreview = document.getElementById('imagePreview');
                    if (item.image) {
                        imagePreview.src = item.image;
                        imagePreview.style.display = 'block';
                    } else {
                        imagePreview.style.display = 'none';
                    }
                    
                    // Select color
                    document.querySelectorAll('.quick-color-option').forEach(o => {
                        if (o.dataset.color === item.color) {
                            o.classList.add('selected');
                        } else {
                            o.classList.remove('selected');
                        }
                    });
                    
                    // Handle custom color
                    if (!document.querySelector(`.quick-color-option[data-color="${item.color}"]`)) {
                        // It's a custom color
                        document.getElementById('customColorOption').classList.add('selected');
                        document.getElementById('customColorSection').style.display = 'block';
                        document.getElementById('colorName').value = item.color;
                        document.getElementById('customColorPicker').value = '#000000'; // Default color for picker
                    } else {
                        document.getElementById('customColorSection').style.display = 'none';
                    }
                    
                    document.getElementById('itemModal').classList.add('active');
                }

                // Delete Item
                function deleteItem(id) {
                    const item = wardrobeItems.find(i => i.id === id);
                    if (confirm('Are you sure you want to delete this item?')) {
                        wardrobeItems = wardrobeItems.filter(i => i.id !== id);
                        saveToLocalStorage();
                        renderWardrobe();
                        showToast('Item deleted successfully!', item);
                    }
                }

                // Toggle Favorite
                function toggleFavorite(id) {
                    const item = wardrobeItems.find(i => i.id === id);
                    if (item) {
                        item.favorite = !item.favorite;
                        saveToLocalStorage();
                        renderWardrobe();
                    }
                }

                // View Details
                function viewDetails(id) {
                    const item = wardrobeItems.find(i => i.id === id);
                    if (!item) return;
                    
                    const imageDisplay = item.image 
                        ? `<img src="${item.image}" alt="${item.name}" style="max-width: 100%; max-height: 400px; border-radius: 12px; margin-bottom: 20px;">`
                        : `<div style="font-size: 8em; margin-bottom: 20px;">${item.emoji}</div>`;
                    
                    const detailsHtml = `
                        <div style="text-align: center; padding: 20px;">
                            ${imageDisplay}
                            <h2 style="color: #fff; margin-bottom: 16px;">${item.name}</h2>
                            <div style="display: grid; gap: 12px; text-align: left; color: rgba(255,255,255,0.9);">
                                <p><strong>Category:</strong> ${item.category}</p>
                                <p><strong>Color:</strong> ${item.color}</p>
                                <p><strong>Season:</strong> ${item.season}</p>
                                <p><strong>Occasion:</strong> ${Array.isArray(item.occasion) ? item.occasion.join(', ') : item.occasion}</p>
                            </div>
                            <div style="margin-top: 24px; padding: 16px; background: rgba(255,255,255,0.1); border-radius: 12px;">
                                <p style="color: rgba(255,255,255,0.9);">
                                    <i class="fas fa-lightbulb"></i> Style Tip: This ${item.color} ${item.category} pairs perfectly with neutral colors!
                                </p>
                            </div>
                        </div>
                    `;
                    
                    document.getElementById('itemDetails').innerHTML = detailsHtml;
                    document.getElementById('detailsModal').classList.add('active');
                }

                // Helper Functions
                function getCategoryEmoji(category) {
                    const emojis = {
                        'topwear': 'üëï',
                        'bottomwear': 'üëñ',
                        'footwear': 'üëü',
                        'accessories': 'üï∂Ô∏è'
                    };
                    return emojis[category] || 'üëï';
                }

                function saveToLocalStorage() {
                    userDB.saveUserData('wardrobeItems', wardrobeItems);
                }

                function showToast(message, item = null) {
                    const toast = document.getElementById('toast');
                    
                    if (item) {
                        // Show full item preview in toast with all details
                        const imageHtml = item.image 
                            ? `<img src="${item.image}" alt="${item.name}">`
                            : item.emoji || 'üëï';
                        
                        const details = [
                            `<span class="toast-tag"><i class="fas fa-tag"></i> ${item.category}</span>`,
                            `<span class="toast-tag"><i class="fas fa-palette"></i> ${item.color}</span>`,
                            `<span class="toast-tag"><i class="fas fa-cloud-sun"></i> ${item.season}</span>`,
                            `<span class="toast-tag"><i class="fas fa-calendar"></i> ${Array.isArray(item.occasion) ? item.occasion.join(', ') : item.occasion}</span>`
                        ];
                        
                        // Determine if it's a delete or add action
                        const isDeleted = message.toLowerCase().includes('deleted');
                        const statusClass = isDeleted ? 'deleted' : 'success';
                        
                        toast.innerHTML = `
                            <div class="toast-image">${imageHtml}</div>
                            <div class="toast-content" style="display: flex; flex-direction: column; min-height: 200px;">
                                <div class="toast-title">${item.name}</div>
                                <div class="toast-details">
                                    ${details.join('')}
                                </div>
                                <div class="toast-message ${statusClass}">${message}</div>
                            </div>
                        `;
                    } else {
                        toast.innerHTML = `<div class="toast-content"><div class="toast-message success">${message}</div></div>`;
                    }
                    
                    toast.classList.add('show');
                    setTimeout(() => {
                        toast.classList.remove('show');
                    }, 4500);
                }

                // Close modals on outside click
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', function(e) {
                        if (e.target === this) {
                            this.classList.remove('active');
                        }
                    });
                });
            </script>
        </main>
    </div>

    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.10.74/build/spline-viewer.js"></script>
</body>
</html>